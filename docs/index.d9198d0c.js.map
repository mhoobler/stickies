{"mappings":"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","sources":["./src/js/indexedDB.js","./src/js/script.js"],"sourcesContent":["const getTransaction = async (db) =>\n  new Promise((resolve, reject) => {\n    var transaction = db.transaction([\"stickies\"], \"readwrite\");\n\n    transaction.oncomplete = (evt) => {\n      console.log(\"transaction success\", evt);\n    };\n\n    transaction.onerror = (evt) => {\n      console.error(\"transaction error\", evt);\n    };\n\n    if (transaction) {\n      resolve(transaction);\n    } else {\n      reject(\"Error with creating transaction\");\n    }\n  });\n\nconst initDB = async () =>\n  new Promise((resolve, reject) => {\n    var request = indexedDB.open(\"stickiesDB\", 1);\n    var db;\n    var transaction;\n\n    request.onerror = (evt) => {\n      console.error(\"IndexedDB error\");\n      reject(\"Error with creating request\");\n    };\n\n    request.onsuccess = async (evt) => {\n      console.log(evt);\n      db = evt.target.result;\n\n      db.onerror = (evt) => {\n        console.error(\"Database error: \" + evt.target.errorCode);\n      };\n\n      try {\n        transaction = await getTransaction(db);\n        const store = transaction.objectStore(\"stickies\");\n        resolve({ store });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    request.onupgradeneeded = (evt) => {\n      var db = evt.target.result;\n\n      var stickiesStore = db.createObjectStore(\"stickies\", {\n        autoIncrement: true,\n        keyPath: \"id\",\n      });\n      stickiesStore.createIndex(\"id\", \"id\", { unique: true });\n      stickiesStore.createIndex(\"message\", \"message\", { unique: false });\n      stickiesStore.createIndex(\"color\", \"color\", { unique: false });\n      stickiesStore.createIndex(\"left\", \"left\", { unique: false });\n      stickiesStore.createIndex(\"top\", \"top\", { unique: false });\n    };\n  });\n\nexport default initDB;\n","import \"../styles/style.scss\";\nimport initDB from \"./indexedDB.js\";\n\nconst App = document.getElementById(\"App\");\nconst colorSelect = document.getElementById(\"color-select\");\nconst colorOptions = document.getElementById(\"color-options\");\nconst stickyContainer = document.getElementById(\"sticky-container\");\nconst trash = document.getElementById(\"trash\");\nconst trashPath = document.getElementById(\"trash\").querySelector(\"path\");\nconst hidden = document.getElementById(\"hidden\");\n\nfunction getStickies() {\n  initDB()\n    .then((res) => {\n      const request = res.store.getAll();\n      request.onsuccess = (evt) => {\n        const stickies = evt.target.result;\n        for (let s of stickies) {\n          let newSticky = createSticky(s.id, s.top, s.left, s.color, s.message);\n          stickyContainer.appendChild(newSticky);\n        }\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nfunction addSticky({ color, top, left }, elm) {\n  initDB()\n    .then((res) => {\n      const request = res.store.add({ color, top, left, message: \"\" });\n      request.onsuccess = (evt) => {\n        console.log(\"add sticky: \", evt.target.result);\n        elm.dataset.id = evt.target.result;\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nfunction updateSticky({ id, color, top, left, message }) {\n  initDB()\n    .then((res) => {\n      const request = res.store.put({ id, color, top, left, message });\n      request.onsuccess = (evt) => {\n        console.log(evt.target.result);\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nfunction deleteSticky(id) {\n  initDB()\n    .then((res) => {\n      const request = res.store.delete(parseInt(id));\n      request.onsuccess = (evt) => {\n        console.log(evt.target.result);\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nconst removeChildren = (query) => {\n  const remove = [...document.querySelectorAll(query)];\n  for (let elm of remove) {\n    document.body.removeChild(elm);\n  }\n};\n\nconst removeChild = document.body.removeChild;\n\nfunction* inf() {\n  let index = 0;\n  while (true) {\n    yield index++;\n  }\n}\n\nvar gen = inf();\n\nconst STATE = {\n  selectedColor: () => colorSelect.getAttribute(\"data-color\"),\n  showingOptions: () => !colorOptions.classList.contains(\"hidden\"),\n  zIndex: () => gen.next().value,\n  getOffset: (target) => {\n    var { top, left } = target.style;\n    top = parseInt(top.slice(0, -2));\n    left = parseInt(left.slice(0, -2));\n    return { top, left };\n  },\n  dragging: null,\n};\n\nfunction createElm(obj) {\n  const { tag, classList, id, value, style, dataset } = obj;\n  const elm = document.createElement(tag);\n  if (classList) {\n    elm.classList = classList;\n  }\n  if (id) {\n    elm.id = id;\n  }\n  if (value) {\n    elm.value = value;\n  }\n  if (style) {\n    for (let k of Object.keys(style)) {\n      elm.style[k] = style[k];\n    }\n  }\n  if (dataset) {\n    for (let k of Object.keys(dataset)) {\n      elm.dataset[k] = dataset[k];\n    }\n  }\n  return elm;\n}\n\nconst debounce = (func, time = 1000) => {\n  let timeout;\n  return (args) => {\n    console.log(func);\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      func(args);\n    }, time);\n  };\n};\n\nfunction createSticky(id, pageY, pageX, color = null, value = null) {\n  console.log(\"x\");\n  const wrapper = createElm({\n    tag: \"div\",\n    classList: \"sticky-wrapper\",\n    style: {\n      zIndex: STATE.zIndex(),\n      top: typeof pageY === \"string\" ? pageY : pageY + \"px\",\n      left: typeof pageX === \"string\" ? pageX : pageX + \"px\",\n      color: color || STATE.selectedColor(),\n    },\n    dataset: {\n      id,\n    },\n  });\n  const newSticky = createElm({\n    tag: \"div\",\n    classList: \"sticky\",\n    dataset: {\n      color: color || STATE.selectedColor(),\n    },\n  });\n  const handle = createElm({\n    tag: \"div\",\n  });\n  const textarea = createElm({\n    tag: \"textarea\",\n    value: value,\n  });\n\n  textarea.onkeydown = debounce((e) => {\n    const { top, left } = wrapper.style;\n    const { id, color } = wrapper.dataset;\n    const { value } = e.target;\n\n    updateSticky({\n      id: parseInt(id),\n      top,\n      left,\n      color,\n      message: value,\n    });\n  });\n\n  wrapper.appendChild(newSticky);\n  newSticky.appendChild(handle);\n  newSticky.appendChild(textarea);\n\n  newSticky.addEventListener(\"touchstart\", stickyTouchStart);\n  newSticky.addEventListener(\"mousedown\", stickyMouseDown);\n\n  return wrapper;\n}\n\nfunction stickyTouchStart(e) {\n  e.currentTarget.parentElement.style.zIndex = STATE.zIndex();\n  console.log(\"ts\");\n  if (e.target.tagName !== \"TEXTAREA\") {\n    const current = e.currentTarget.parentElement;\n    STATE.dragging = current;\n    const { top, left } = STATE.getOffset(current);\n    console.log(e.targetTouches[0]);\n    const xOffset = left - e.targetTouches[0].pageX;\n    const yOffset = top - e.targetTouches[0].pageY;\n\n    const trashRect = trashPath.getBoundingClientRect();\n    trashRect.x = Math.floor(trashRect.x);\n    trashRect.y = Math.floor(trashRect.y);\n    var pageX, pageY;\n\n    function touchMove(e) {\n      pageX = e.targetTouches[0].pageX;\n      pageY = e.targetTouches[0].pageY;\n      const { x, y, width, height } = trashRect;\n\n      if (pageX > x && pageX < x + width && pageY > y && pageY < y + height) {\n        trashPath.style.fill = \"#F33\";\n      } else {\n        trashPath.style.fill = \"\";\n      }\n\n      current.style.top = yOffset + pageY + \"px\";\n      current.style.left = xOffset + pageX + \"px\";\n    }\n\n    function touchEnd(e) {\n      console.log(e);\n      const { x, y, width, height } = trashRect;\n\n      const message = current.querySelector(\"textarea\").value;\n      const { top, left } = current.style;\n      const { id, color } = current.dataset;\n\n      if (pageX > x && pageX < x + width && pageY > y && pageY < y + height) {\n        trashPath.style.fill = \"#F33\";\n        trashUp();\n        return;\n      }\n\n      STATE.dragging = null;\n\n      updateSticky({\n        id: parseInt(id),\n        top,\n        left,\n        message,\n        color,\n      });\n\n      current.removeEventListener(\"touchmove\", touchMove);\n      current.removeEventListener(\"touchend\", touchEnd);\n      current.addEventListener(\"touchstart\", stickyTouchStart);\n    }\n\n    current.addEventListener(\"touchmove\", touchMove);\n    current.addEventListener(\"touchend\", touchEnd);\n    current.removeEventListener(\"touchstart\", stickyTouchStart);\n  }\n}\n\nfunction stickyMouseDown(e) {\n  console.log(\"md\");\n  e.currentTarget.parentElement.style.zIndex = STATE.zIndex();\n  const { height, width } = App.getBoundingClientRect();\n  if (e.target.tagName !== \"TEXTAREA\") {\n    const current = e.currentTarget.parentElement;\n    STATE.dragging = current;\n    const { top, left } = STATE.getOffset(current);\n    const xOffset = left - e.pageX;\n    const yOffset = top - e.pageY;\n\n    function mouseMove(e) {\n      App.style.height = height + \"px\";\n      App.style.width = height + \"px\";\n      current.style.top = yOffset + e.pageY + \"px\";\n      current.style.left = xOffset + e.pageX + \"px\";\n    }\n\n    function mouseUp(e) {\n      App.style.height = \"\";\n      App.style.width = \"\";\n      STATE.dragging = null;\n      const message = current.querySelector(\"textarea\").value;\n      const { top, left } = current.style;\n      const { id, color } = current.dataset;\n      console.log(id);\n\n      updateSticky({\n        id: parseInt(id),\n        top,\n        left,\n        message,\n        color,\n      });\n\n      document.removeEventListener(\"mousemove\", mouseMove);\n      document.removeEventListener(\"mouseup\", mouseUp);\n    }\n\n    document.addEventListener(\"mousemove\", mouseMove);\n    document.addEventListener(\"mouseup\", mouseUp);\n  }\n}\n\n// Color Select Events --- START\ncolorSelect.addEventListener(\"mouseup\", colorSelectClick);\ncolorSelect.addEventListener(\"mousedown\", colorSelectMouseDown);\n//colorSelect.addEventListener(\"dragstart\", colorSelectDragStart);\n//colorSelect.addEventListener(\"dragend\", colorSelectDragEnd);\n\n// touch events\ncolorSelect.addEventListener(\"touchstart\", colorSelectTouchStart);\ncolorSelect.addEventListener(\"touchend\", colorSelectTouchEnd);\n\nvar timeout;\n\nfunction colorSelectMouseDown(e) {\n  timeout = setTimeout(() => {\n    const newSticky = createSticky(0, e.pageY, e.pageX);\n    stickyContainer.appendChild(newSticky);\n    STATE.dragging = newSticky;\n\n    function mouseMove(e) {\n      console.log(\"new sticky\", e);\n      newSticky.style.top = e.pageY + \"px\";\n      newSticky.style.left = e.pageX + \"px\";\n    }\n\n    function mouseUp(e) {\n      STATE.dragging = null;\n      addSticky(\n        {\n          top: e.pageY,\n          left: e.pageX,\n          color: STATE.selectedColor(),\n        },\n        newSticky\n      );\n\n      document.removeEventListener(\"mousemove\", mouseMove);\n      document.removeEventListener(\"mouseup\", mouseUp);\n    }\n\n    document.addEventListener(\"mousemove\", mouseMove);\n    document.addEventListener(\"mouseup\", mouseUp);\n  }, 200);\n}\n\nfunction colorSelectTouchStart(e) {\n  colorSelect.removeEventListener(\"mouseup\", colorSelectClick);\n  colorSelect.removeEventListener(\"mousedown\", colorSelectMouseDown);\n\n  timeout = setTimeout(() => {\n    const newSticky = createSticky(\n      0,\n      e.targetTouches[0].pageY,\n      e.targetTouches[0].pageX\n    );\n    stickyContainer.appendChild(newSticky);\n\n    function touchMove(e) {\n      newSticky.style.top = e.targetTouches[0].pageY + \"px\";\n      newSticky.style.left = e.targetTouches[0].pageX + \"px\";\n      colorSelect.removeEventListener(\"touchend\", colorSelectTouchEnd);\n    }\n\n    function touchEnd(e) {\n      timeout = null;\n      addSticky(\n        {\n          top: newSticky.style.top,\n          left: newSticky.style.left,\n          color: STATE.selectedColor(),\n        },\n        newSticky\n      );\n      document.removeEventListener(\"touchmove\", touchMove);\n      document.removeEventListener(\"touchend\", touchEnd);\n      colorSelect.removeEventListener(\"touchend\", colorSelectTouchEnd);\n      colorSelect.addEventListener(\"touchend\", colorSelectTouchEnd);\n    }\n\n    document.addEventListener(\"touchmove\", touchMove);\n    document.addEventListener(\"touchend\", touchEnd);\n  }, 200);\n}\n\nfunction colorSelectTouchEnd(e) {\n  if (timeout) {\n    clearTimeout(timeout);\n  }\n  const targetValue = e.target.dataset.color;\n  e.currentTarget.setAttribute(\"data-color\", targetValue);\n\n  colorOptions.classList.toggle(\"hidden\");\n}\n\nfunction colorSelectClick(e) {\n  if (timeout) {\n    clearTimeout(timeout);\n  }\n  const targetValue = e.target.dataset.color;\n\n  e.currentTarget.setAttribute(\"data-color\", targetValue);\n  colorOptions.classList.toggle(\"hidden\");\n}\n\n// Color Select Events --- END\n\nfunction stickyTouchEnd(e) {\n  if (e.target.tagName !== \"TEXTAREA\") {\n    const parent = e.currentTarget;\n    console.log(parent);\n    const message = parent.querySelector(\"textarea\").value;\n    const { top, left } = parent.style;\n    const { id, color } = parent.dataset;\n\n    updateSticky({\n      id: parseInt(id),\n      top,\n      left,\n      message,\n      color,\n    });\n  }\n}\n\nfunction trashLeave(e) {\n  trashPath.style.fill = \"\";\n}\n\nfunction trashUp() {\n  if (STATE.dragging) {\n    let confirm = window.confirm(\"Are you sure you want to delete this?\");\n    if (confirm) {\n      deleteSticky(STATE.dragging.dataset.id);\n\n      STATE.dragging.remove();\n      STATE.dragging = null;\n      trashPath.style.fill = \"\";\n    }\n  }\n}\n\nfunction trashEnter(e) {\n  if (STATE.dragging) {\n    trashPath.style.fill = \"#F33\";\n  }\n}\n\ntrash.addEventListener(\"mouseenter\", trashEnter);\ntrash.addEventListener(\"mouseleave\", trashLeave);\ntrash.addEventListener(\"mouseup\", trashUp);\n\ntrash.addEventListener(\"touchstart\", (e) => {\n  trashPath.style.fill = \"#F33\";\n});\n\ntrash.addEventListener(\"touchend\", (e) => {\n  trashPath.style.fill = \"\";\n});\n\n// Organizers\n\nfunction organize(str) {\n  const colorsArr = [\"#FD1\", \"#FAA\", \"#AAF\"];\n\n  //reset zIndex generator\n  gen = inf();\n\n  const stickies = colorsArr.map((e) => [\n    ...document.querySelectorAll(`.sticky[data-color=\"${e}\"]`),\n  ]);\n\n  for (let dy = 0; dy < colorsArr.length; dy++) {\n    const stickies = [\n      ...document.querySelectorAll(`.sticky[data-color=\"${colorsArr[dy]}\"]`),\n    ];\n\n    switch (str) {\n      case \"diagonal\": {\n        for (let dx = 0; dx < stickies.length; dx++) {\n          let wrapper = stickies[dx].parentElement;\n          let textarea = stickies[dx].querySelector(\"textarea\");\n          wrapper.style.top = 35 * dx + 50 + \"px\";\n          wrapper.style.left = 20 * dx + 250 * dy + 50 + \"px\";\n          wrapper.style.zIndex = dx * colorsArr.length + dy;\n          textarea.style.width = 100 + \"px\";\n          textarea.style.height = 100 + \"px\";\n\n          // call zIndex generator to keep it updated\n          // ...hate this loop, but it's pretty fast\n          while (dx * colorsArr.length + dy > gen.next().value) {\n            gen.next().value;\n          }\n        }\n        break;\n      }\n\n      case \"horizontal\": {\n        for (let dx = 0; dx < stickies.length; dx++) {\n          let wrapper = stickies[dx].parentElement;\n          let textarea = stickies[dx].querySelector(\"textarea\");\n          wrapper.style.top = dy * 200 + 50 + \"px\";\n          wrapper.style.left = dx * 50 + 50 + \"px\";\n          wrapper.style.zIndex = gen.next().value;\n          textarea.style.width = 100 + \"px\";\n          textarea.style.height = 100 + \"px\";\n        }\n        break;\n      }\n\n      case \"vertical\": {\n        for (let dx = 0; dx < stickies.length; dx++) {\n          let wrapper = stickies[dx].parentElement;\n          let textarea = stickies[dx].querySelector(\"textarea\");\n          wrapper.style.left = dy * 200 + 50 + \"px\";\n          wrapper.style.top = dx * 50 + 50 + \"px\";\n          wrapper.style.zIndex = gen.next().value;\n          textarea.style.width = 100 + \"px\";\n          textarea.style.height = 100 + \"px\";\n        }\n        break;\n      }\n      default:\n        break;\n    }\n  }\n}\n\ndocument.getElementById(\"diagonal\").onclick = () => organize(\"diagonal\");\ndocument.getElementById(\"horizontal\").onclick = () => organize(\"horizontal\");\ndocument.getElementById(\"vertical\").onclick = () => organize(\"vertical\");\n\n// fetch Stickies on first render\ngetStickies();\n"],"names":["$4b9b1fa295c3f78413bbf588dabeb6d3$export$default","async","Promise","resolve","reject","db","request","indexedDB","open","onerror","evt","console","error","onsuccess","log","target","result","errorCode","store","transaction","oncomplete","$4b9b1fa295c3f78413bbf588dabeb6d3$var$getTransaction","objectStore","err","onupgradeneeded","stickiesStore","createObjectStore","autoIncrement","keyPath","createIndex","unique","$579db261152ee8e72dc20ee685cc5d4e$var$App","document","getElementById","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelect","$579db261152ee8e72dc20ee685cc5d4e$var$colorOptions","$579db261152ee8e72dc20ee685cc5d4e$var$stickyContainer","$579db261152ee8e72dc20ee685cc5d4e$var$trash","$579db261152ee8e72dc20ee685cc5d4e$var$trashPath","querySelector","$579db261152ee8e72dc20ee685cc5d4e$var$addSticky","color","top","left","elm","then","res","add","message","dataset","id","catch","$579db261152ee8e72dc20ee685cc5d4e$var$updateSticky","put","body","removeChild","$579db261152ee8e72dc20ee685cc5d4e$var$inf","index","$579db261152ee8e72dc20ee685cc5d4e$var$gen","$579db261152ee8e72dc20ee685cc5d4e$var$STATE","selectedColor","getAttribute","showingOptions","classList","contains","zIndex","next","value","getOffset","style","parseInt","slice","dragging","$579db261152ee8e72dc20ee685cc5d4e$var$createElm","obj","tag","createElement","k","Object","keys","$579db261152ee8e72dc20ee685cc5d4e$var$createSticky","pageY","pageX","wrapper","newSticky","handle","textarea","onkeydown","func","time","timeout","args","clearTimeout","setTimeout","$579db261152ee8e72dc20ee685cc5d4e$var$debounce","e","appendChild","addEventListener","$579db261152ee8e72dc20ee685cc5d4e$var$stickyTouchStart","$579db261152ee8e72dc20ee685cc5d4e$var$stickyMouseDown","currentTarget","parentElement","tagName","current","targetTouches","xOffset","yOffset","trashRect","getBoundingClientRect","touchMove","x","y","width","height","fill","Math","floor","touchEnd","$579db261152ee8e72dc20ee685cc5d4e$var$trashUp","removeEventListener","mouseMove","mouseUp","$579db261152ee8e72dc20ee685cc5d4e$var$timeout","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelectMouseDown","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelectTouchEnd","targetValue","setAttribute","toggle","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelectClick","window","confirm","delete","remove","$579db261152ee8e72dc20ee685cc5d4e$var$organize","str","colorsArr","map","querySelectorAll","dy","length","stickies","dx","onclick","getAll","s"],"version":3,"file":"index.d9198d0c.js.map"}
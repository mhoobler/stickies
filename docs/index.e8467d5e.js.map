{"mappings":"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","sources":["./src/js/indexedDB.js","./src/js/script.js"],"sourcesContent":["const getTransaction = async (db) =>\n  new Promise((resolve, reject) => {\n    var transaction = db.transaction([\"stickies\"], \"readwrite\");\n\n    transaction.oncomplete = (evt) => {\n      console.log(\"transaction success\", evt);\n    };\n\n    transaction.onerror = (evt) => {\n      console.error(\"transaction error\", evt);\n    };\n\n    if (transaction) {\n      resolve(transaction);\n    } else {\n      reject(\"Error with creating transaction\");\n    }\n  });\n\nconst initDB = async () =>\n  new Promise((resolve, reject) => {\n    var request = indexedDB.open(\"stickiesDB\", 1);\n    var db;\n    var transaction;\n\n    request.onerror = (evt) => {\n      console.error(\"IndexedDB error\");\n      reject(\"Error with creating request\");\n    };\n\n    request.onsuccess = async (evt) => {\n      console.log(evt);\n      db = evt.target.result;\n\n      db.onerror = (evt) => {\n        console.error(\"Database error: \" + evt.target.errorCode);\n      };\n\n      try {\n        transaction = await getTransaction(db);\n        const store = transaction.objectStore(\"stickies\");\n        resolve({ store });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    request.onupgradeneeded = (evt) => {\n      var db = evt.target.result;\n\n      var stickiesStore = db.createObjectStore(\"stickies\", {\n        autoIncrement: true,\n        keyPath: \"id\",\n      });\n      stickiesStore.createIndex(\"id\", \"id\", { unique: true });\n      stickiesStore.createIndex(\"message\", \"message\", { unique: false });\n      stickiesStore.createIndex(\"color\", \"color\", { unique: false });\n      stickiesStore.createIndex(\"left\", \"left\", { unique: false });\n      stickiesStore.createIndex(\"top\", \"top\", { unique: false });\n    };\n  });\n\nexport default initDB;\n","import \"../styles/style.scss\";\nimport initDB from \"./indexedDB.js\";\n\nconst colorSelect = document.getElementById(\"color-select\");\nconst colorOptions = document.getElementById(\"color-options\");\nconst stickyContainer = document.getElementById(\"sticky-container\");\nconst trash = document.getElementById(\"trash\");\nconst trashPath = document.getElementById(\"trash-path\");\nconst hidden = document.getElementById(\"hidden\");\n\nfunction getStickies() {\n  initDB()\n    .then((res) => {\n      const request = res.store.getAll();\n      request.onsuccess = (evt) => {\n        const stickies = evt.target.result;\n        for (let s of stickies) {\n          let newSticky = createSticky(s.id, s.top, s.left, s.color, s.message);\n          stickyContainer.appendChild(newSticky);\n        }\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nfunction addSticky({ color, top, left }) {\n  initDB()\n    .then((res) => {\n      const request = res.store.add({ color, top, left, message: \"\" });\n      request.onsuccess = (evt) => {\n        console.log(evt.target.result);\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nfunction updateSticky({ id, color, top, left, message }) {\n  initDB()\n    .then((res) => {\n      const request = res.store.put({ id, color, top, left, message });\n      request.onsuccess = (evt) => {\n        console.log(evt.target.result);\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nfunction deleteSticky(id) {\n  initDB()\n    .then((res) => {\n      const request = res.store.delete(parseInt(id));\n      request.onsuccess = (evt) => {\n        console.log(evt.target.result);\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nconst removeChildren = (query) => {\n  const remove = [...document.querySelectorAll(query)];\n  for (let elm of remove) {\n    document.body.removeChild(elm);\n  }\n};\n\nconst removeChild = document.body.removeChild;\n\nfunction* inf() {\n  let index = 0;\n  while (true) {\n    yield index++;\n  }\n}\n\nvar gen = inf();\n\ndocument.getElementById(\"reset\").addEventListener(\"click\", () => {\n  const stickies = [...document.querySelectorAll(\".sticky\")];\n  for (let s of stickies) {\n    s.style.zIndex = 0;\n  }\n  gen = inf();\n});\n\nconst STATE = {\n  selectedColor: () => colorSelect.getAttribute(\"data-color\"),\n  showingOptions: () => !colorOptions.classList.contains(\"hidden\"),\n  zIndex: () => gen.next().value,\n  getOffset: (target) => {\n    var { top, left } = target.style;\n    top = parseInt(top.slice(0, -2));\n    left = parseInt(left.slice(0, -2));\n    return { top, left };\n  },\n  dragging: null,\n};\n\nfunction createElm(obj) {\n  const { tag, classList, id, value, style, dataset } = obj;\n  const elm = document.createElement(tag);\n  if (classList) {\n    elm.classList = classList;\n  }\n  if (id) {\n    elm.id = id;\n  }\n  if (value) {\n    elm.value = value;\n  }\n  if (style) {\n    for (let k of Object.keys(style)) {\n      elm.style[k] = style[k];\n    }\n  }\n  if (dataset) {\n    for (let k of Object.keys(dataset)) {\n      elm.dataset[k] = dataset[k];\n    }\n  }\n  return elm;\n}\n\nconst debounce = (func, time = 1000) => {\n  let timeout;\n  return (args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      func(args);\n    }, time);\n  };\n};\n\nfunction createSticky(id, pageY, pageX, color = null, value = null) {\n  const newSticky = createElm({\n    tag: \"div\",\n    classList: \"sticky\",\n    style: {\n      top: typeof pageY === \"string\" ? pageY : pageY + \"px\",\n      left: typeof pageX === \"string\" ? pageX : pageX + \"px\",\n      zIndex: STATE.zIndex(),\n    },\n    dataset: {\n      id,\n      color: color || STATE.selectedColor(),\n    },\n  });\n  const handle = createElm({\n    tag: \"div\",\n  });\n  const textarea = createElm({\n    tag: \"textarea\",\n    value: value,\n  });\n\n  textarea.onkeydown = debounce((e) => {\n    const parent = e.target.parentElement;\n    const { top, left } = parent.style;\n    const { id, color } = parent.dataset;\n    const { value } = e.target;\n\n    updateSticky({\n      id: parseInt(id),\n      top,\n      left,\n      color,\n      message: value,\n    });\n  });\n\n  newSticky.appendChild(handle);\n  newSticky.appendChild(textarea);\n  newSticky.draggable;\n  //newSticky.addEventListener(\"dragstart\", stickyDragStart);\n  //newSticky.addEventListener(\"dragend\", stickyDragEnd);\n  newSticky.addEventListener(\"touchmove\", stickyTouchMove);\n  newSticky.addEventListener(\"mousedown\", stickyMouseDown);\n\n  return newSticky;\n}\n\nfunction stickyMouseDown(e) {\n  e.currentTarget.style.zIndex = STATE.zIndex();\n  if (e.target.tagName !== \"TEXTAREA\") {\n    const current = e.currentTarget;\n    STATE.dragging = current;\n    const { top, left } = STATE.getOffset(current);\n    const xOffset = left - e.pageX;\n    const yOffset = top - e.pageY;\n\n    function mouseMove(e) {\n      current.style.top = yOffset + e.pageY + \"px\";\n      current.style.left = xOffset + e.pageX + \"px\";\n    }\n\n    function mouseUp(e) {\n      STATE.dragging = null;\n      const message = e.currentTarget.querySelector(\"textarea\").value;\n      const { top, left } = e.currentTarget.style;\n      const { id, color } = e.currentTarget.dataset;\n\n      updateSticky({\n        id: parseInt(id),\n        top,\n        left,\n        message,\n        color,\n      });\n\n      current.removeEventListener(\"mousemove\", mouseMove);\n      current.removeEventListener(\"mouseup\", mouseUp);\n    }\n\n    current.addEventListener(\"mousemove\", mouseMove);\n    current.addEventListener(\"mouseup\", mouseUp);\n  }\n}\n\n// Color Select Events --- START\ncolorSelect.addEventListener(\"mouseup\", colorSelectClick);\ncolorSelect.addEventListener(\"mousedown\", colorSelectMouseDown);\n//colorSelect.addEventListener(\"dragstart\", colorSelectDragStart);\n//colorSelect.addEventListener(\"dragend\", colorSelectDragEnd);\n\n// touch events\ncolorSelect.addEventListener(\"touchstart\", colorSelectTouchStart);\ncolorSelect.addEventListener(\"touchend\", colorSelectTouchEnd);\n\nvar timeout;\n\nfunction colorSelectMouseDown(e) {\n  timeout = setTimeout(() => {\n    const newSticky = createSticky(e.pageY, e.pageX);\n    stickyContainer.appendChild(newSticky);\n    STATE.dragging = newSticky;\n\n    function mouseMove(e) {\n      newSticky.style.top = e.pageY + \"px\";\n      newSticky.style.left = e.pageX + \"px\";\n    }\n\n    function mouseUp(e) {\n      STATE.dragging = null;\n      addSticky({\n        top: e.pageY,\n        left: e.pageX,\n        color: STATE.selectedColor(),\n      });\n\n      document.removeEventListener(\"mousemove\", mouseMove);\n      document.removeEventListener(\"mouseup\", mouseUp);\n    }\n\n    document.addEventListener(\"mousemove\", mouseMove);\n    document.addEventListener(\"mouseup\", mouseUp);\n  }, 200);\n}\n\nvar evtFunc;\n\nfunction colorSelectTouchStart(e) {\n  const newSticky = createSticky(0, 0);\n  console.log(newSticky);\n  evtFunc = (e) => colorSelectTouchMove(e, newSticky);\n  colorSelect.addEventListener(\"touchmove\", evtFunc);\n  stickyContainer.appendChild(newSticky);\n}\n\nfunction colorSelectTouchMove(e, sticky) {\n  sticky.style.top = e.targetTouches[0].pageY + \"px\";\n  sticky.style.left = e.targetTouches[0].pageX + \"px\";\n}\n\nfunction colorSelectTouchEnd(e) {\n  console.log(e);\n  colorSelect.removeEventListener(\"touchmove\", evtFunc);\n}\n\nfunction colorSelectClick(e) {\n  console.log(\"c\");\n  if (timeout) {\n    clearTimeout(timeout);\n  }\n  const targetValue = e.target.dataset.color;\n\n  e.currentTarget.setAttribute(\"data-color\", targetValue);\n  colorOptions.classList.toggle(\"hidden\");\n}\n\n// Color Select Events --- END\n\nfunction stickyTouchMove(e) {\n  STATE.dragged = e.currentTarget;\n  e.currentTarget.style.top = e.targetTouches[0].pageY + \"px\";\n  e.currentTarget.style.left = e.targetTouches[0].pageX + \"px\";\n\n  touchTarget = e;\n}\n\nfunction trashDrop(e) {\n  console.log(e);\n  trashLeave(e);\n}\n\nfunction trashEnter(e) {\n  if (STATE.dragging) {\n    trashPath.style.fill = \"#F33\";\n  }\n}\n\nfunction trashLeave(e) {\n  trashPath.style.fill = \"\";\n}\n\nfunction trashUp(e) {\n  if (STATE.dragging) {\n    let confirm = window.confirm(\"Are you sure you want to delete this?\");\n    console.log(confirm);\n    if (confirm) {\n      deleteSticky(STATE.dragging.dataset.id);\n\n      STATE.dragging.remove();\n      STATE.dragging = null;\n      trashPath.style.fill = \"\";\n    }\n  }\n}\n\ntrash.addEventListener(\"mouseenter\", trashEnter);\ntrash.addEventListener(\"mouseleave\", trashLeave);\ntrash.addEventListener(\"mouseup\", trashUp);\n\ntrash.addEventListener(\"touchstart\", (e) => {\n  trashPath.style.fill = \"#F33\";\n});\n\ntrash.addEventListener(\"touchend\", (e) => {\n  trashPath.style.fill = \"\";\n});\n\n// fetch Stickies on first render\ngetStickies();\n"],"names":["$4b9b1fa295c3f78413bbf588dabeb6d3$export$default","async","Promise","resolve","reject","db","request","indexedDB","open","onerror","evt","console","error","onsuccess","log","target","result","errorCode","store","transaction","oncomplete","$4b9b1fa295c3f78413bbf588dabeb6d3$var$getTransaction","objectStore","err","onupgradeneeded","stickiesStore","createObjectStore","autoIncrement","keyPath","createIndex","unique","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelect","document","getElementById","$579db261152ee8e72dc20ee685cc5d4e$var$colorOptions","$579db261152ee8e72dc20ee685cc5d4e$var$stickyContainer","$579db261152ee8e72dc20ee685cc5d4e$var$trash","$579db261152ee8e72dc20ee685cc5d4e$var$trashPath","$579db261152ee8e72dc20ee685cc5d4e$var$updateSticky","id","color","top","left","message","then","res","put","catch","body","removeChild","$579db261152ee8e72dc20ee685cc5d4e$var$inf","index","$579db261152ee8e72dc20ee685cc5d4e$var$gen","addEventListener","stickies","querySelectorAll","s","style","zIndex","$579db261152ee8e72dc20ee685cc5d4e$var$STATE","selectedColor","getAttribute","showingOptions","classList","contains","next","value","getOffset","parseInt","slice","dragging","$579db261152ee8e72dc20ee685cc5d4e$var$createElm","obj","tag","dataset","elm","createElement","k","Object","keys","$579db261152ee8e72dc20ee685cc5d4e$var$createSticky","pageY","pageX","newSticky","handle","textarea","onkeydown","func","time","timeout","args","clearTimeout","setTimeout","$579db261152ee8e72dc20ee685cc5d4e$var$debounce","e","parent","parentElement","appendChild","draggable","$579db261152ee8e72dc20ee685cc5d4e$var$stickyTouchMove","$579db261152ee8e72dc20ee685cc5d4e$var$stickyMouseDown","currentTarget","tagName","current","xOffset","yOffset","mouseMove","mouseUp","querySelector","removeEventListener","$579db261152ee8e72dc20ee685cc5d4e$var$timeout","$579db261152ee8e72dc20ee685cc5d4e$var$evtFunc","dragged","targetTouches","touchTarget","$579db261152ee8e72dc20ee685cc5d4e$var$trashLeave","fill","targetValue","setAttribute","toggle","add","$579db261152ee8e72dc20ee685cc5d4e$var$addSticky","sticky","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelectTouchMove","confirm","window","delete","remove","getAll"],"version":3,"file":"index.e8467d5e.js.map"}
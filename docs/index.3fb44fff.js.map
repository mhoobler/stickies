{"mappings":"kBAeMA,EAASC,SAAA,IACTC,SAAQ,CAACC,EAASC,SAEhBC,EADAC,EAAUC,UAAUC,KAAK,aAAc,GAI3CF,EAAQG,QAAWC,IACjBC,QAAQC,MAAM,mBACdR,EAAO,gCAGTE,EAAQO,UAAYZ,MAAAA,KAClBI,EAAKK,EAAII,OAAOC,QAEbN,QAAWC,IACZC,QAAQC,MAAM,mBAAqBF,EAAII,OAAOE,sBAKxCC,QAnCShB,OAAAA,GAAOI,IACxBH,SAAQ,CAACC,EAASC,SAChBc,EAAcb,EAAGa,YAAAA,CAAa,YAAa,aAE/CA,EAAYT,QAAWC,IACrBC,QAAQC,MAAM,oBAAqBF,IAGjCQ,EACFf,EAAQe,GAERd,EAAO,sCAuBee,CAAed,IACTe,YAAY,YACtCjB,EAAAA,CAAUc,MAAAA,UACHI,GACPV,QAAQC,MAAMS,KAIlBf,EAAQgB,gBAAmBZ,QAGrBa,EAFKb,EAAII,OAAOC,OAEGS,kBAAkB,WAAA,CACvCC,eAAe,EACfC,QAAS,OAEXH,EAAcI,YAAY,KAAM,KAAA,CAAQC,QAAQ,IAChDL,EAAcI,YAAY,UAAW,UAAA,CAAaC,QAAQ,IAC1DL,EAAcI,YAAY,QAAS,QAAA,CAAWC,QAAQ,IACtDL,EAAcI,YAAY,OAAQ,OAAA,CAAUC,QAAQ,IACpDL,EAAcI,YAAY,MAAO,MAAA,CAASC,QAAQ,QAmBxD,SAAAC,EAAmBC,EAAMC,eACfC,EAAAA,IAAOC,EAAAA,KAAKC,GAASJ,EAE7B9B,IACGmC,MAAMC,UACC9B,EAAU8B,EAAInB,MAAMoB,IAAAA,CAAML,MAAAA,EAAOC,IAAAA,EAAKC,KAAAA,EAAMI,QAAS,KAC3DhC,EAAQO,UAAaH,IACnBqB,EAAGrB,EAAII,OAAOC,SAEhBT,EAAQG,QAAWC,IACjBC,QAAQ4B,IAAI7B,OAGf8B,OAAOnB,GAAQV,QAAQC,MAAMS,KAGlC,SAAAoB,EAAsBX,EAAMC,EAAK,mBACvBW,EAAAA,MAAIV,EAAAA,IAAOC,EAAAA,KAAKC,EAAAA,QAAMI,GAAYR,EAC1C9B,IACGmC,MAAMC,UACC9B,EAAU8B,EAAInB,MAAM0B,IAAAA,CAAMD,GAAAA,EAAIV,MAAAA,EAAOC,IAAAA,EAAKC,KAAAA,EAAMI,QAAAA,IACtDhC,EAAQO,UAAaH,IACnBqB,EAAGrB,EAAII,OAAOC,SAEhBT,EAAQG,QAAWC,IACjBC,QAAQ4B,IAAI7B,OAGf8B,OAAOnB,GAAQV,QAAQC,MAAMS,KC5FtBuB,SAASC,eAAe,aAC9BC,EAAcF,SAASC,eAAe,gBACtCE,EAAeH,SAASC,eAAe,iBACvCG,EAAkBJ,SAASC,eAAe,oBAE1CI,GADQL,SAASC,eAAe,SACpBD,SAASC,eAAe,SAASK,cAAc,SAClDN,SAASC,eAAe,UAEvC,SAAAM,QACMC,EAAQ,eAEJA,QAINC,EAAOF,UAELG,EAAAA,CACJC,cAAe,IAAMT,EAAYU,aAAa,cAC9CC,eAAgB,KAAOV,EAAaW,UAAUC,SAAS,UACvDC,OAAQ,IAAMP,EAAKQ,OAAOC,MAC1BC,UAAYjD,YACJmB,EAAAA,KAAKC,GAASpB,EAAOkD,aAGlB/B,IAFTA,EAAMgC,SAAShC,EAAIiC,MAAM,GAAI,IAEfhC,KADdA,EAAO+B,SAAS/B,EAAKgC,MAAM,GAAI,MAGjCC,SAAU,MAGZ,SAAAC,EAAmBC,aACTC,EAAAA,UAAKZ,EAAAA,GAAWhB,EAAAA,MAAIoB,EAAAA,MAAOE,EAAAA,QAAOO,GAAYF,EAChDG,EAAM5B,SAAS6B,cAAcH,MAC/BZ,IACFc,EAAId,UAAYA,GAEdhB,IACF8B,EAAI9B,GAAKA,GAEPoB,IACFU,EAAIV,MAAQA,GAEVE,UACOU,KAAKC,OAAOC,KAAKZ,GACxBQ,EAAIR,MAAMU,GAAKV,EAAMU,MAGrBH,UACOG,KAAKC,OAAOC,KAAKL,GACxBC,EAAID,QAAQG,GAAKH,EAAQG,UAGtBF,EAaT,SAAAK,EAAsBnC,EAAIoC,EAAOC,EAAO/C,EAAQ,KAAM8B,EAAQ,YACtDkB,EAAUZ,EAAAA,CACdE,IAAK,MACLZ,UAAW,iBACXM,MAAAA,CACEJ,OAAQN,EAAMM,SACd3B,IAAsB,iBAAV6C,EAAqBA,EAAQA,EAAQ,KACjD5C,KAAuB,iBAAV6C,EAAqBA,EAAQA,EAAQ,KAClD/C,MAAOA,GAASsB,EAAMC,iBAExBgB,QAAAA,CACE7B,GAAAA,KAGEuC,EAAYb,EAAAA,CAChBE,IAAK,MACLZ,UAAW,SACXa,QAAAA,CACEvC,MAAOA,GAASsB,EAAMC,mBAGpB2B,EAASd,EAAAA,CACbE,IAAK,QAEDa,EAAWf,EAAAA,CACfE,IAAK,WACLR,MAAOA,WAGTqB,EAASC,UAvCM,EAACC,EAAMC,EAAO,WACzBC,SACIC,IACNC,aAAaF,GACbA,EAAUG,YAAW,KACnBL,EAAKG,KACJF,KAiCgBK,EAAUC,cACrB3D,EAAAA,KAAKC,GAAS8C,EAAQhB,UACtBtB,GAAOsC,EAAQT,eACfvC,GAAUiD,EAAUV,eACpBT,GAAU8B,EAAE9E,UAGlB4B,GAAIuB,SAASvB,GACbT,IAAAA,EACAC,KAAAA,EACAF,MAAAA,EACAM,QAASwB,OAIbkB,EAAQa,YAAYZ,GACpBA,EAAUY,YAAYX,GACtBD,EAAUY,YAAYV,GAEtBF,EAAUa,iBAAiB,aAAcC,GACzCd,EAAUa,iBAAiB,YAAaE,GAEjChB,EAGT,SAAAe,EAA0BH,MACxBA,EAAEK,cAAcC,cAAclC,MAAMJ,OAASN,EAAMM,SAC1B,aAArBgC,EAAE9E,OAAOqF,QAAY,OACjBC,EAAUR,EAAEK,cACZI,EAASD,EAAQF,cACvB5C,EAAMa,SAAWkC,YACTpE,EAAAA,KAAKC,GAASoB,EAAMS,UAAUsC,GAChCC,EAAUpE,EAAO0D,EAAEW,cAAc,GAAGxB,MACpCyB,EAAUvE,EAAM2D,EAAEW,cAAc,GAAGzB,MAEnC2B,EAAYxD,EAAUyD,4BAGxB3B,EAAOD,EAEX,SAAA6B,EAAmBf,GACjBb,EAAQa,EAAEW,cAAc,GAAGxB,MAC3BD,EAAQc,EAAEW,cAAc,GAAGzB,cACnB8B,EAAAA,EAAGC,EAAAA,MAAGC,EAAAA,OAAOC,GAAWN,EAG9BxD,EAAUe,MAAMgD,KADdjC,EAAQ6B,GAAK7B,EAAQ6B,EAAIE,GAAShC,EAAQ+B,GAAK/B,EAAQ+B,EAAIE,EACtC,OAEA,GAGzBV,EAAOrC,MAAM/B,IAAMuE,EAAU1B,EAAQ,KACrCuB,EAAOrC,MAAM9B,KAAOoE,EAAUvB,EAAQ,KAhBxC0B,EAAUG,EAAIK,KAAKC,MAAMT,EAAUG,GACnCH,EAAUI,EAAII,KAAKC,MAAMT,EAAUI,GA8CnCT,EAAQN,iBAAiB,YAAaa,GACtCP,EAAQN,iBAAiB,YA7BzB,SAAAqB,EAAkBvB,WACRgB,EAAAA,EAAGC,EAAAA,MAAGC,EAAAA,OAAOC,GAAWN,EAE1BnE,EAAU8D,EAAQlD,cAAc,YAAYY,WAC1C7B,EAAAA,KAAKC,GAASmE,EAAOrC,UACrBtB,GAAO2D,EAAO9B,eACdvC,GAAUoE,EAAQ7B,WAEtBQ,EAAQ6B,GAAK7B,EAAQ6B,EAAIE,GAAShC,EAAQ+B,GAAK/B,EAAQ+B,EAAIE,SAC7D9D,EAAUe,MAAMgD,KAAO,YACvBI,OAIE1E,GAAIuB,SAASvB,GACbT,IAAAA,EACAC,KAAAA,EACAI,QAAAA,EACAN,MAAAA,IAIJsB,EAAMa,SAAW,KACjBiC,EAAQiB,oBAAoB,YAAaV,GACzCP,EAAQiB,oBAAoB,WAAYF,GACxCf,EAAQN,iBAAiB,aAAcC,MAKzCK,EAAQiB,oBAAoB,aAActB,IAI9C,SAAAC,EAAyBJ,MACvBA,EAAEK,cAAcC,cAAclC,MAAMJ,OAASN,EAAMM,SAC1B,aAArBgC,EAAE9E,OAAOqF,QAAY,OACjBC,EAAUR,EAAEK,cACZI,EAAST,EAAEK,cAAcC,cAC/B5C,EAAMa,SAAWkC,YACTpE,EAAAA,KAAKC,GAASoB,EAAMS,UAAUsC,GAChCC,EAAUpE,EAAO0D,EAAEb,MACnByB,EAAUvE,EAAM2D,EAAEd,MAElB2B,EAAYxD,EAAUyD,wBAC5BD,EAAUG,EAAIK,KAAKC,MAAMT,EAAUG,GACnCH,EAAUI,EAAII,KAAKC,MAAMT,EAAUI,WAC3BD,EAAAA,EAAGC,EAAAA,MAAGC,EAAAA,OAAOC,GAAWN,MAC5B1B,EAAOD,EAEX,SAAAwC,EAAmB1B,GACjBb,EAAQa,EAAEb,MACVD,EAAQc,EAAEd,MAGR7B,EAAUe,MAAMgD,KADdjC,EAAQ6B,GAAK7B,EAAQ6B,EAAIE,GAAShC,EAAQ+B,GAAK/B,EAAQ+B,EAAIE,EACtC,OAEA,GAGzBV,EAAOrC,MAAM/B,IAAMuE,EAAUZ,EAAEd,MAAQ,KACvCuB,EAAOrC,MAAM9B,KAAOoE,EAAUV,EAAEb,MAAQ,KA8B1CnC,SAASkD,iBAAiB,YAAawB,GACvC1E,SAASkD,iBAAiB,WA5B1B,SAAAyB,EAAiB3B,SACTtD,EAAU8D,EAAQlD,cAAc,YAAYY,WAC1C7B,EAAAA,KAAKC,GAASmE,EAAOrC,UACrBtB,GAAO2D,EAAO9B,eACdvC,GAAUoE,EAAQ7B,QAEtBQ,EAAQ6B,GAAK7B,EAAQ6B,EAAIE,GAAShC,EAAQ+B,GAAK/B,EAAQ+B,EAAIE,GAC7D9D,EAAUe,MAAMgD,KAAO,OACvBI,IAEAxE,SAASyE,oBAAoB,YAAaC,GAC1C1E,SAASyE,oBAAoB,UAAWE,OAGtC7E,GAAIuB,SAASvB,GACbT,IAAAA,EACAC,KAAAA,EACAI,QAAAA,EACAN,MAAAA,IAIJsB,EAAMa,SAAW,KACjBvB,SAASyE,oBAAoB,YAAaC,GAC1C1E,SAASyE,oBAAoB,UAAWE,WAmB1CC,ED/MiBzF,ECiNrB,SAAA0F,EAA8B7B,GAC5B4B,EAAU9B,YAAW,WACbT,EAAYJ,EAAa,EAAGe,EAAEd,MAAOc,EAAEb,OAK7C,SAAAuC,EAAmB1B,GACjBX,EAAUjB,MAAM/B,IAAM2D,EAAEd,MAAQ,KAChCG,EAAUjB,MAAM9B,KAAO0D,EAAEb,MAAQ,KANnC/B,EAAgB6C,YAAYZ,GAC5B3B,EAAMa,SAAWc,EAwBjBrC,SAASkD,iBAAiB,YAAawB,GACvC1E,SAASkD,iBAAiB,WAhB1B,SAAAyB,EAAiB3B,GACftC,EAAMa,SAAW,QAGblC,IAAK2D,EAAEd,MACP5C,KAAM0D,EAAEb,MACR/C,MAAOsB,EAAMC,kBAEdb,GAAQuC,EAAUV,QAAQ7B,GAAKA,IAGlCE,SAASyE,oBAAoB,YAAaC,GAC1C1E,SAASyE,oBAAoB,UAAWE,QAKzC,KA8CL,SAAAG,EAA0B9B,GACpB4B,GACF/B,aAAa+B,SAETG,EAAc/B,EAAE9E,OAAOyD,QAAQvC,MACrC4D,EAAEK,cAAc2B,aAAa,aAAcD,GAE3C5E,EAAaW,UAAUmE,OAAO,UAKhC,SAAAT,OACM9D,EAAMa,SAAAA,CACM2D,OAAOC,QAAQ,4CD7PjC,SAAsBjG,EAAMC,EAAK,mBACvBW,GAAOZ,EACf9B,IACGmC,MAAMC,UACC9B,EAAU8B,EAAInB,MAAM+G,OAAO/D,SAASvB,IAC1CpC,EAAQO,UAAaH,IACnBqB,EAAGrB,EAAII,OAAOC,SAEhBT,EAAQG,QAAWC,IACjBC,QAAQ4B,IAAI7B,OAGf8B,OAAOnB,GAAQV,QAAQC,MAAMS,OCmPbqB,GAAIY,EAAMa,SAASI,QAAQ7B,KAE1CY,EAAMa,SAAS8D,SACf3E,EAAMa,SAAW,KACjBlB,EAAUe,MAAMgD,KAAO,KAM7B,SAAAkB,EAAkBC,SACVC,EAAAA,CAAa,OAAQ,OAAQ,QAGnC/E,EAAOF,YAEEkF,EAAK,EAAGA,EAAKD,EAAUE,OAAQD,IAAAA,OAChCE,EAAAA,IACD3F,SAAS4F,iBAAAA,uBAAwCJ,EAAUC,gBAGxDF,OACD,mBACMM,EAAK,EAAGA,EAAKF,EAASD,OAAQG,IAAAA,KACjCzD,EAAUuD,EAASE,GAAIvC,cACvBf,EAAWoD,EAASE,GAAIvF,cAAc,gBAC1C8B,EAAQhB,MAAM/B,IAAM,GAAKwG,EAAK,GAAK,KACnCzD,EAAQhB,MAAM9B,KAAO,GAAKuG,EAAK,IAAMJ,EAAK,GAAK,KAC/CrD,EAAQhB,MAAMJ,OAAS6E,EAAKL,EAAUE,OAASD,EAC/CrD,EAAQhB,MAAM0E,WAAa,sBAC3BvD,EAASnB,MAAM8C,MAAQ,QACvB3B,EAASnB,MAAM+C,OAAS,QAIjB0B,EAAKL,EAAUE,OAASD,EAAKhF,EAAKQ,OAAOC,OAC9CT,EAAKQ,OAAOC,gBAMb,qBACM2E,EAAK,EAAGA,EAAKF,EAASD,OAAQG,IAAAA,KACjCzD,EAAUuD,EAASE,GAAIvC,cACvBf,EAAWoD,EAASE,GAAIvF,cAAc,YAC1C8B,EAAQhB,MAAM/B,IAAW,IAALoG,EAAW,GAAK,KACpCrD,EAAQhB,MAAM9B,KAAY,GAALuG,EAAU,GAAK,KACpCzD,EAAQhB,MAAMJ,OAASP,EAAKQ,OAAOC,MACnCkB,EAAQhB,MAAM0E,WAAa,sBAC3BvD,EAASnB,MAAM8C,MAAQ,QACvB3B,EAASnB,MAAM+C,OAAS,kBAKvB,mBACM0B,EAAK,EAAGA,EAAKF,EAASD,OAAQG,IAAAA,KACjCzD,EAAUuD,EAASE,GAAIvC,cACvBf,EAAWoD,EAASE,GAAIvF,cAAc,YAC1C8B,EAAQhB,MAAM9B,KAAY,IAALmG,EAAW,GAAK,KACrCrD,EAAQhB,MAAM/B,IAAW,GAALwG,EAAU,GAAK,KACnCzD,EAAQhB,MAAMJ,OAASP,EAAKQ,OAAOC,MACnCkB,EAAQhB,MAAM0E,WAAa,sBAC3BvD,EAASnB,MAAM8C,MAAQ,QACvB3B,EAASnB,MAAM+C,OAAS,UAShCrB,YAAW,WACHiD,EAAAA,IAAe/F,SAAS4F,iBAAiB,4BAEtCI,KAAKD,EACZC,EAAE5E,MAAM0E,WAAa,KAEtB,KAvLL5F,EAAYgD,iBAAiB,YAAa2B,GAC1C3E,EAAYgD,iBAAiB,cA2C7B,SAA+BF,GAE7B9C,EAAYuE,oBAAoB,UAAWK,GAC3C5E,EAAYuE,oBAAoB,YAAaI,GAE7CD,EAAU9B,YAAW,WACbT,EAAYJ,EAChB,EACAe,EAAEW,cAAc,GAAGzB,MACnBc,EAAEW,cAAc,GAAGxB,OAKrB,SAAA4B,EAAmBf,GACjBX,EAAUjB,MAAM/B,IAAM2D,EAAEW,cAAc,GAAGzB,MAAQ,KACjDG,EAAUjB,MAAM9B,KAAO0D,EAAEW,cAAc,GAAGxB,MAAQ,KAClDjC,EAAYuE,oBAAoB,WAAYwB,qBAN9C7F,EAAgB6C,YAAYZ,GA0B5BrC,SAASkD,iBAAiB,YAAaa,GACvC/D,SAASkD,iBAAiB,YAjB1B,SAAAqB,EAAkBvB,GAChB4B,EAAU,QAGNvF,IAAKgD,EAAUjB,MAAM/B,IACrBC,KAAM+C,EAAUjB,MAAM9B,KACtBF,MAAOsB,EAAMC,kBAEdb,GAAQuC,EAAUV,QAAQ7B,GAAKA,IAElCE,SAASyE,oBAAoB,YAAaV,GAC1C/D,SAASyE,oBAAoB,WAAYF,GACzCrE,EAAYuE,oBAAoB,WAAYwB,qBAC5C/F,EAAYgD,iBAAiB,WAAY+C,0BAK1C,QAjFL/F,EAAYgD,iBAAiB,WAAY4B,GACzC5E,EAAYgD,iBAAiB,UAAW4B,GAuLxC9E,SAASC,eAAe,YAAYiG,QAAU,IAAMZ,EAAS,YAC7DtF,SAASC,eAAe,cAAciG,QAAU,IAAMZ,EAAS,cAC/DtF,SAASC,eAAe,YAAYiG,QAAU,IAAMZ,EAAS,YDlYxCnG,ECqYRwG,YACFQ,KAAKR,EAAAA,KACRtD,EAAYJ,EAAakE,EAAErG,GAAIqG,EAAE9G,IAAK8G,EAAE7G,KAAM6G,EAAE/G,MAAO+G,EAAEzG,SAC7DU,EAAgB6C,YAAYZ,KDvY9BjF,IACGmC,MAAMC,UACC9B,EAAU8B,EAAInB,MAAM+H,SAC1B1I,EAAQO,UAAaH,UACb6H,EAAW7H,EAAII,OAAOC,OAC5BgB,EAAGwG,IAELjI,EAAQG,QAAWC,IACjBC,QAAQ4B,IAAI7B,OAGf8B,OAAOnB,GAAQV,QAAQC,MAAMS","sources":["./src/js/indexedDB.js","./src/js/script.js"],"sourcesContent":["const getTransaction = async (db) =>\n  new Promise((resolve, reject) => {\n    var transaction = db.transaction([\"stickies\"], \"readwrite\");\n\n    transaction.onerror = (evt) => {\n      console.error(\"transaction error\", evt);\n    };\n\n    if (transaction) {\n      resolve(transaction);\n    } else {\n      reject(\"Error with creating transaction\");\n    }\n  });\n\nconst initDB = async () =>\n  new Promise((resolve, reject) => {\n    var request = indexedDB.open(\"stickiesDB\", 1);\n    var db;\n    var transaction;\n\n    request.onerror = (evt) => {\n      console.error(\"IndexedDB error\");\n      reject(\"Error with creating request\");\n    };\n\n    request.onsuccess = async (evt) => {\n      db = evt.target.result;\n\n      db.onerror = (evt) => {\n        console.error(\"Database error: \" + evt.target.errorCode);\n      };\n\n      try {\n        transaction = await getTransaction(db);\n        const store = transaction.objectStore(\"stickies\");\n        resolve({ store });\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    request.onupgradeneeded = (evt) => {\n      var db = evt.target.result;\n\n      var stickiesStore = db.createObjectStore(\"stickies\", {\n        autoIncrement: true,\n        keyPath: \"id\",\n      });\n      stickiesStore.createIndex(\"id\", \"id\", { unique: true });\n      stickiesStore.createIndex(\"message\", \"message\", { unique: false });\n      stickiesStore.createIndex(\"color\", \"color\", { unique: false });\n      stickiesStore.createIndex(\"left\", \"left\", { unique: false });\n      stickiesStore.createIndex(\"top\", \"top\", { unique: false });\n    };\n  });\n\nfunction getStickies(cb) {\n  initDB()\n    .then((res) => {\n      const request = res.store.getAll();\n      request.onsuccess = (evt) => {\n        const stickies = evt.target.result;\n        cb(stickies);\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nfunction addSticky(data, cb) {\n  const { color, top, left } = data;\n\n  initDB()\n    .then((res) => {\n      const request = res.store.add({ color, top, left, message: \"\" });\n      request.onsuccess = (evt) => {\n        cb(evt.target.result);\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nfunction updateSticky(data, cb = () => {}) {\n  const { id, color, top, left, message } = data;\n  initDB()\n    .then((res) => {\n      const request = res.store.put({ id, color, top, left, message });\n      request.onsuccess = (evt) => {\n        cb(evt.target.result);\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nfunction deleteSticky(data, cb = () => {}) {\n  const { id } = data;\n  initDB()\n    .then((res) => {\n      const request = res.store.delete(parseInt(id));\n      request.onsuccess = (evt) => {\n        cb(evt.target.result);\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\nexport { getStickies, addSticky, updateSticky, deleteSticky };\n","import \"../styles/style.scss\";\nimport {\n  getStickies,\n  addSticky,\n  updateSticky,\n  deleteSticky,\n} from \"./indexedDB.js\";\n\nconst App = document.getElementById(\"App\");\nconst colorSelect = document.getElementById(\"color-select\");\nconst colorOptions = document.getElementById(\"color-options\");\nconst stickyContainer = document.getElementById(\"sticky-container\");\nconst trash = document.getElementById(\"trash\");\nconst trashPath = document.getElementById(\"trash\").querySelector(\"path\");\nconst hidden = document.getElementById(\"hidden\");\n\nfunction* inf() {\n  let index = 0;\n  while (true) {\n    yield index++;\n  }\n}\n\nvar getZ = inf();\n\nconst STATE = {\n  selectedColor: () => colorSelect.getAttribute(\"data-color\"),\n  showingOptions: () => !colorOptions.classList.contains(\"hidden\"),\n  zIndex: () => getZ.next().value,\n  getOffset: (target) => {\n    var { top, left } = target.style;\n    top = parseInt(top.slice(0, -2));\n    left = parseInt(left.slice(0, -2));\n    return { top, left };\n  },\n  dragging: null,\n};\n\nfunction createElm(obj) {\n  const { tag, classList, id, value, style, dataset } = obj;\n  const elm = document.createElement(tag);\n  if (classList) {\n    elm.classList = classList;\n  }\n  if (id) {\n    elm.id = id;\n  }\n  if (value) {\n    elm.value = value;\n  }\n  if (style) {\n    for (let k of Object.keys(style)) {\n      elm.style[k] = style[k];\n    }\n  }\n  if (dataset) {\n    for (let k of Object.keys(dataset)) {\n      elm.dataset[k] = dataset[k];\n    }\n  }\n  return elm;\n}\n\nconst debounce = (func, time = 1000) => {\n  let timeout;\n  return (args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      func(args);\n    }, time);\n  };\n};\n\nfunction createSticky(id, pageY, pageX, color = null, value = null) {\n  const wrapper = createElm({\n    tag: \"div\",\n    classList: \"sticky-wrapper\",\n    style: {\n      zIndex: STATE.zIndex(),\n      top: typeof pageY === \"string\" ? pageY : pageY + \"px\",\n      left: typeof pageX === \"string\" ? pageX : pageX + \"px\",\n      color: color || STATE.selectedColor(),\n    },\n    dataset: {\n      id,\n    },\n  });\n  const newSticky = createElm({\n    tag: \"div\",\n    classList: \"sticky\",\n    dataset: {\n      color: color || STATE.selectedColor(),\n    },\n  });\n  const handle = createElm({\n    tag: \"div\",\n  });\n  const textarea = createElm({\n    tag: \"textarea\",\n    value: value,\n  });\n\n  textarea.onkeydown = debounce((e) => {\n    const { top, left } = wrapper.style;\n    const { id } = wrapper.dataset;\n    const { color } = newSticky.dataset;\n    const { value } = e.target;\n\n    updateSticky({\n      id: parseInt(id),\n      top,\n      left,\n      color,\n      message: value,\n    });\n  });\n\n  wrapper.appendChild(newSticky);\n  newSticky.appendChild(handle);\n  newSticky.appendChild(textarea);\n\n  newSticky.addEventListener(\"touchstart\", stickyTouchStart);\n  newSticky.addEventListener(\"mousedown\", stickyMouseDown);\n\n  return wrapper;\n}\n\nfunction stickyTouchStart(e) {\n  e.currentTarget.parentElement.style.zIndex = STATE.zIndex();\n  if (e.target.tagName !== \"TEXTAREA\") {\n    const current = e.currentTarget;\n    const parent = current.parentElement;\n    STATE.dragging = parent;\n    const { top, left } = STATE.getOffset(parent);\n    const xOffset = left - e.targetTouches[0].pageX;\n    const yOffset = top - e.targetTouches[0].pageY;\n\n    const trashRect = trashPath.getBoundingClientRect();\n    trashRect.x = Math.floor(trashRect.x);\n    trashRect.y = Math.floor(trashRect.y);\n    var pageX, pageY;\n\n    function touchMove(e) {\n      pageX = e.targetTouches[0].pageX;\n      pageY = e.targetTouches[0].pageY;\n      const { x, y, width, height } = trashRect;\n\n      if (pageX > x && pageX < x + width && pageY > y && pageY < y + height) {\n        trashPath.style.fill = \"#f33\";\n      } else {\n        trashPath.style.fill = \"\";\n      }\n\n      parent.style.top = yOffset + pageY + \"px\";\n      parent.style.left = xOffset + pageX + \"px\";\n    }\n\n    function touchEnd(e) {\n      const { x, y, width, height } = trashRect;\n\n      const message = current.querySelector(\"textarea\").value;\n      const { top, left } = parent.style;\n      const { id } = parent.dataset;\n      const { color } = current.dataset;\n\n      if (pageX > x && pageX < x + width && pageY > y && pageY < y + height) {\n        trashPath.style.fill = \"#F33\";\n        deleteDragging();\n        return;\n      } else {\n        updateSticky({\n          id: parseInt(id),\n          top,\n          left,\n          message,\n          color,\n        });\n      }\n\n      STATE.dragging = null;\n      current.removeEventListener(\"touchmove\", touchMove);\n      current.removeEventListener(\"touchend\", touchEnd);\n      current.addEventListener(\"touchstart\", stickyTouchStart);\n    }\n\n    current.addEventListener(\"touchmove\", touchMove);\n    current.addEventListener(\"touchend\", touchEnd);\n    current.removeEventListener(\"touchstart\", stickyTouchStart);\n  }\n}\n\nfunction stickyMouseDown(e) {\n  e.currentTarget.parentElement.style.zIndex = STATE.zIndex();\n  if (e.target.tagName !== \"TEXTAREA\") {\n    const current = e.currentTarget;\n    const parent = e.currentTarget.parentElement;\n    STATE.dragging = parent;\n    const { top, left } = STATE.getOffset(parent);\n    const xOffset = left - e.pageX;\n    const yOffset = top - e.pageY;\n\n    const trashRect = trashPath.getBoundingClientRect();\n    trashRect.x = Math.floor(trashRect.x);\n    trashRect.y = Math.floor(trashRect.y);\n    const { x, y, width, height } = trashRect;\n    var pageX, pageY;\n\n    function mouseMove(e) {\n      pageX = e.pageX;\n      pageY = e.pageY;\n\n      if (pageX > x && pageX < x + width && pageY > y && pageY < y + height) {\n        trashPath.style.fill = \"#f33\";\n      } else {\n        trashPath.style.fill = \"\";\n      }\n\n      parent.style.top = yOffset + e.pageY + \"px\";\n      parent.style.left = xOffset + e.pageX + \"px\";\n    }\n\n    function mouseUp(e) {\n      const message = current.querySelector(\"textarea\").value;\n      const { top, left } = parent.style;\n      const { id } = parent.dataset;\n      const { color } = current.dataset;\n\n      if (pageX > x && pageX < x + width && pageY > y && pageY < y + height) {\n        trashPath.style.fill = \"#F33\";\n        deleteDragging();\n\n        document.removeEventListener(\"mousemove\", mouseMove);\n        document.removeEventListener(\"mouseup\", mouseUp);\n      } else {\n        updateSticky({\n          id: parseInt(id),\n          top,\n          left,\n          message,\n          color,\n        });\n      }\n\n      STATE.dragging = null;\n      document.removeEventListener(\"mousemove\", mouseMove);\n      document.removeEventListener(\"mouseup\", mouseUp);\n    }\n\n    document.addEventListener(\"mousemove\", mouseMove);\n    document.addEventListener(\"mouseup\", mouseUp);\n  }\n}\n\n// Color Select Events --- START\n// Note: We're handling events differently\ncolorSelect.addEventListener(\"mousedown\", colorSelectMouseDown);\ncolorSelect.addEventListener(\"touchstart\", colorSelectTouchStart);\ncolorSelect.addEventListener(\"touchend\", colorSelectClick);\ncolorSelect.addEventListener(\"mouseup\", colorSelectClick);\n\n// This timeout is used to differentiate between a click and a drag\n// DragEvents were a huge performance hit compared to MouseEvents\n// Seems like something to do with long idle frames,\n// but can't pin down exactly why DragEvents are so slow\nvar timeout;\n\nfunction colorSelectMouseDown(e) {\n  timeout = setTimeout(() => {\n    const newSticky = createSticky(0, e.pageY, e.pageX);\n    stickyContainer.appendChild(newSticky);\n    STATE.dragging = newSticky;\n\n    // handle drag\n    function mouseMove(e) {\n      newSticky.style.top = e.pageY + \"px\";\n      newSticky.style.left = e.pageX + \"px\";\n    }\n\n    // handle end of drag\n    function mouseUp(e) {\n      STATE.dragging = null;\n      addSticky(\n        {\n          top: e.pageY,\n          left: e.pageX,\n          color: STATE.selectedColor(),\n        },\n        (id) => (newSticky.dataset.id = id)\n      );\n\n      document.removeEventListener(\"mousemove\", mouseMove);\n      document.removeEventListener(\"mouseup\", mouseUp);\n    }\n\n    document.addEventListener(\"mousemove\", mouseMove);\n    document.addEventListener(\"mouseup\", mouseUp);\n  }, 200);\n}\n\nfunction colorSelectTouchStart(e) {\n  // TouchEvents can initiate MouseEvents, but not the other way around\n  colorSelect.removeEventListener(\"mouseup\", colorSelectClick);\n  colorSelect.removeEventListener(\"mousedown\", colorSelectMouseDown);\n\n  timeout = setTimeout(() => {\n    const newSticky = createSticky(\n      0,\n      e.targetTouches[0].pageY,\n      e.targetTouches[0].pageX\n    );\n    stickyContainer.appendChild(newSticky);\n\n    // Handle drag\n    function touchMove(e) {\n      newSticky.style.top = e.targetTouches[0].pageY + \"px\";\n      newSticky.style.left = e.targetTouches[0].pageX + \"px\";\n      colorSelect.removeEventListener(\"touchend\", colorSelectTouchEnd);\n    }\n\n    // Handle end of drag\n    function touchEnd(e) {\n      timeout = null;\n      addSticky(\n        {\n          top: newSticky.style.top,\n          left: newSticky.style.left,\n          color: STATE.selectedColor(),\n        },\n        (id) => (newSticky.dataset.id = id)\n      );\n      document.removeEventListener(\"touchmove\", touchMove);\n      document.removeEventListener(\"touchend\", touchEnd);\n      colorSelect.removeEventListener(\"touchend\", colorSelectTouchEnd);\n      colorSelect.addEventListener(\"touchend\", colorSelectTouchEnd);\n    }\n\n    document.addEventListener(\"touchmove\", touchMove);\n    document.addEventListener(\"touchend\", touchEnd);\n  }, 200);\n}\n\n// This fires when the user \"clicks\"\nfunction colorSelectClick(e) {\n  if (timeout) {\n    clearTimeout(timeout);\n  }\n  const targetValue = e.target.dataset.color;\n  e.currentTarget.setAttribute(\"data-color\", targetValue);\n\n  colorOptions.classList.toggle(\"hidden\");\n}\n\n// Color Select Events --- END\n\nfunction deleteDragging() {\n  if (STATE.dragging) {\n    let confirm = window.confirm(\"Are you sure you want to delete this?\");\n    if (confirm) {\n      deleteSticky({ id: STATE.dragging.dataset.id });\n\n      STATE.dragging.remove();\n      STATE.dragging = null;\n      trashPath.style.fill = \"\";\n    }\n  }\n}\n\n// Organizers\nfunction organize(str) {\n  const colorsArr = [\"#FD1\", \"#FAA\", \"#AAF\"];\n\n  //reset zIndex generator\n  getZ = inf();\n\n  for (let dy = 0; dy < colorsArr.length; dy++) {\n    const stickies = [\n      ...document.querySelectorAll(`.sticky[data-color=\"${colorsArr[dy]}\"]`),\n    ];\n\n    switch (str) {\n      case \"diagonal\": {\n        for (let dx = 0; dx < stickies.length; dx++) {\n          let wrapper = stickies[dx].parentElement;\n          let textarea = stickies[dx].querySelector(\"textarea\");\n          wrapper.style.top = 35 * dx + 50 + \"px\";\n          wrapper.style.left = 20 * dx + 250 * dy + 50 + \"px\";\n          wrapper.style.zIndex = dx * colorsArr.length + dy;\n          wrapper.style.transition = \"top 0.5s, left 0.5s\";\n          textarea.style.width = 100 + \"px\";\n          textarea.style.height = 100 + \"px\";\n\n          // call zIndex generator to keep it updated\n          // ...hate this loop, but it's pretty fast\n          while (dx * colorsArr.length + dy > getZ.next().value) {\n            getZ.next().value;\n          }\n        }\n        break;\n      }\n\n      case \"horizontal\": {\n        for (let dx = 0; dx < stickies.length; dx++) {\n          let wrapper = stickies[dx].parentElement;\n          let textarea = stickies[dx].querySelector(\"textarea\");\n          wrapper.style.top = dy * 200 + 50 + \"px\";\n          wrapper.style.left = dx * 50 + 50 + \"px\";\n          wrapper.style.zIndex = getZ.next().value;\n          wrapper.style.transition = \"top 0.5s, left 0.5s\";\n          textarea.style.width = 100 + \"px\";\n          textarea.style.height = 100 + \"px\";\n        }\n        break;\n      }\n\n      case \"vertical\": {\n        for (let dx = 0; dx < stickies.length; dx++) {\n          let wrapper = stickies[dx].parentElement;\n          let textarea = stickies[dx].querySelector(\"textarea\");\n          wrapper.style.left = dy * 200 + 50 + \"px\";\n          wrapper.style.top = dx * 50 + 50 + \"px\";\n          wrapper.style.zIndex = getZ.next().value;\n          wrapper.style.transition = \"top 0.5s, left 0.5s\";\n          textarea.style.width = 100 + \"px\";\n          textarea.style.height = 100 + \"px\";\n        }\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  setTimeout(() => {\n    const wrappers = [...document.querySelectorAll(\".sticky-wrapper\")];\n\n    for (let w of wrappers) {\n      w.style.transition = \"\";\n    }\n  }, 520);\n}\n\ndocument.getElementById(\"diagonal\").onclick = () => organize(\"diagonal\");\ndocument.getElementById(\"horizontal\").onclick = () => organize(\"horizontal\");\ndocument.getElementById(\"vertical\").onclick = () => organize(\"vertical\");\n\n// fetch Stickies on first render\ngetStickies((stickies) => {\n  for (let s of stickies) {\n    let newSticky = createSticky(s.id, s.top, s.left, s.color, s.message);\n    stickyContainer.appendChild(newSticky);\n  }\n});\n"],"names":["$4b9b1fa295c3f78413bbf588dabeb6d3$var$initDB","async","Promise","resolve","reject","db","request","indexedDB","open","onerror","evt","console","error","onsuccess","target","result","errorCode","store","transaction","$4b9b1fa295c3f78413bbf588dabeb6d3$var$getTransaction","objectStore","err","onupgradeneeded","stickiesStore","createObjectStore","autoIncrement","keyPath","createIndex","unique","$4b9b1fa295c3f78413bbf588dabeb6d3$export$addSticky","data","cb","color","top","left","then","res","add","message","log","catch","$4b9b1fa295c3f78413bbf588dabeb6d3$export$updateSticky","id","put","document","getElementById","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelect","$579db261152ee8e72dc20ee685cc5d4e$var$colorOptions","$579db261152ee8e72dc20ee685cc5d4e$var$stickyContainer","$579db261152ee8e72dc20ee685cc5d4e$var$trashPath","querySelector","$579db261152ee8e72dc20ee685cc5d4e$var$inf","index","$579db261152ee8e72dc20ee685cc5d4e$var$getZ","$579db261152ee8e72dc20ee685cc5d4e$var$STATE","selectedColor","getAttribute","showingOptions","classList","contains","zIndex","next","value","getOffset","style","parseInt","slice","dragging","$579db261152ee8e72dc20ee685cc5d4e$var$createElm","obj","tag","dataset","elm","createElement","k","Object","keys","$579db261152ee8e72dc20ee685cc5d4e$var$createSticky","pageY","pageX","wrapper","newSticky","handle","textarea","onkeydown","func","time","timeout","args","clearTimeout","setTimeout","$579db261152ee8e72dc20ee685cc5d4e$var$debounce","e","appendChild","addEventListener","$579db261152ee8e72dc20ee685cc5d4e$var$stickyTouchStart","$579db261152ee8e72dc20ee685cc5d4e$var$stickyMouseDown","currentTarget","parentElement","tagName","current","parent","xOffset","targetTouches","yOffset","trashRect","getBoundingClientRect","touchMove","x","y","width","height","fill","Math","floor","touchEnd","$579db261152ee8e72dc20ee685cc5d4e$var$deleteDragging","removeEventListener","mouseMove","mouseUp","$579db261152ee8e72dc20ee685cc5d4e$var$timeout","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelectMouseDown","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelectClick","targetValue","setAttribute","toggle","window","confirm","delete","remove","$579db261152ee8e72dc20ee685cc5d4e$var$organize","str","colorsArr","dy","length","stickies","querySelectorAll","dx","transition","wrappers","w","colorSelectTouchEnd","onclick","s","getAll"],"version":3,"file":"index.3fb44fff.js.map"}
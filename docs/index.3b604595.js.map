{"mappings":"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","sources":["./src/js/indexedDB.js","./src/js/script.js"],"sourcesContent":["const getTransaction = async (db) =>\n  new Promise((resolve, reject) => {\n    var transaction = db.transaction([\"stickies\"], \"readwrite\");\n\n    transaction.oncomplete = (evt) => {\n      console.log(\"transaction success\", evt);\n    };\n\n    transaction.onerror = (evt) => {\n      console.error(\"transaction error\", evt);\n    };\n\n    if (transaction) {\n      resolve(transaction);\n    } else {\n      reject(\"Error with creating transaction\");\n    }\n  });\n\nconst initDB = async () =>\n  new Promise((resolve, reject) => {\n    var request = indexedDB.open(\"stickiesDB\", 1);\n    var db;\n    var transaction;\n\n    request.onerror = (evt) => {\n      console.error(\"IndexedDB error\");\n      reject(\"Error with creating request\");\n    };\n\n    request.onsuccess = async (evt) => {\n      console.log(evt);\n      db = evt.target.result;\n\n      db.onerror = (evt) => {\n        console.error(\"Database error: \" + evt.target.errorCode);\n      };\n\n      try {\n        transaction = await getTransaction(db);\n        const store = transaction.objectStore(\"stickies\");\n        resolve({ store });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    request.onupgradeneeded = (evt) => {\n      var db = evt.target.result;\n\n      var stickiesStore = db.createObjectStore(\"stickies\", {\n        autoIncrement: true,\n        keyPath: \"id\",\n      });\n      stickiesStore.createIndex(\"id\", \"id\", { unique: true });\n      stickiesStore.createIndex(\"message\", \"message\", { unique: false });\n      stickiesStore.createIndex(\"color\", \"color\", { unique: false });\n      stickiesStore.createIndex(\"left\", \"left\", { unique: false });\n      stickiesStore.createIndex(\"top\", \"top\", { unique: false });\n    };\n  });\n\nexport default initDB;\n","import \"../styles/style.scss\";\nimport initDB from \"./indexedDB.js\";\n\nconst App = document.getElementById(\"App\");\nconst colorSelect = document.getElementById(\"color-select\");\nconst colorOptions = document.getElementById(\"color-options\");\nconst stickyContainer = document.getElementById(\"sticky-container\");\nconst trash = document.getElementById(\"trash\");\nconst trashPath = document.getElementById(\"trash\").querySelector(\"path\");\nconst hidden = document.getElementById(\"hidden\");\n\nfunction getStickies() {\n  initDB()\n    .then((res) => {\n      const request = res.store.getAll();\n      request.onsuccess = (evt) => {\n        const stickies = evt.target.result;\n        for (let s of stickies) {\n          let newSticky = createSticky(s.id, s.top, s.left, s.color, s.message);\n          stickyContainer.appendChild(newSticky);\n        }\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nfunction addSticky({ color, top, left }, elm) {\n  initDB()\n    .then((res) => {\n      const request = res.store.add({ color, top, left, message: \"\" });\n      request.onsuccess = (evt) => {\n        console.log(\"add sticky: \", evt.target.result);\n        elm.dataset.id = evt.target.result;\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nfunction updateSticky({ id, color, top, left, message }) {\n  initDB()\n    .then((res) => {\n      const request = res.store.put({ id, color, top, left, message });\n      request.onsuccess = (evt) => {\n        console.log(evt.target.result);\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nfunction deleteSticky(id) {\n  initDB()\n    .then((res) => {\n      const request = res.store.delete(parseInt(id));\n      request.onsuccess = (evt) => {\n        console.log(evt.target.result);\n      };\n      request.onerror = (evt) => {\n        console.log(evt);\n      };\n    })\n    .catch((err) => console.error(err));\n}\n\nconst removeChildren = (query) => {\n  const remove = [...document.querySelectorAll(query)];\n  for (let elm of remove) {\n    document.body.removeChild(elm);\n  }\n};\n\nconst removeChild = document.body.removeChild;\n\nfunction* inf() {\n  let index = 0;\n  while (true) {\n    yield index++;\n  }\n}\n\nvar gen = inf();\n\ndocument.getElementById(\"reset\").addEventListener(\"click\", () => {\n  const stickies = [...document.querySelectorAll(\".sticky\")];\n  for (let s of stickies) {\n    s.style.zIndex = 0;\n  }\n  gen = inf();\n});\n\nconst STATE = {\n  selectedColor: () => colorSelect.getAttribute(\"data-color\"),\n  showingOptions: () => !colorOptions.classList.contains(\"hidden\"),\n  zIndex: () => gen.next().value,\n  getOffset: (target) => {\n    var { top, left } = target.style;\n    top = parseInt(top.slice(0, -2));\n    left = parseInt(left.slice(0, -2));\n    return { top, left };\n  },\n  dragging: null,\n};\n\nfunction createElm(obj) {\n  const { tag, classList, id, value, style, dataset } = obj;\n  const elm = document.createElement(tag);\n  if (classList) {\n    elm.classList = classList;\n  }\n  if (id) {\n    elm.id = id;\n  }\n  if (value) {\n    elm.value = value;\n  }\n  if (style) {\n    for (let k of Object.keys(style)) {\n      elm.style[k] = style[k];\n    }\n  }\n  if (dataset) {\n    for (let k of Object.keys(dataset)) {\n      elm.dataset[k] = dataset[k];\n    }\n  }\n  return elm;\n}\n\nconst debounce = (func, time = 1000) => {\n  let timeout;\n  return (args) => {\n    console.log(func);\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      func(args);\n    }, time);\n  };\n};\n\nfunction createSticky(id, pageY, pageX, color = null, value = null) {\n  const newSticky = createElm({\n    tag: \"div\",\n    classList: \"sticky\",\n    style: {\n      top: typeof pageY === \"string\" ? pageY : pageY + \"px\",\n      left: typeof pageX === \"string\" ? pageX : pageX + \"px\",\n      zIndex: STATE.zIndex(),\n    },\n    dataset: {\n      id,\n      color: color || STATE.selectedColor(),\n    },\n  });\n  const handle = createElm({\n    tag: \"div\",\n  });\n  const textarea = createElm({\n    tag: \"textarea\",\n    value: value,\n  });\n\n  textarea.onkeydown = debounce((e) => {\n    const parent = e.target.parentElement;\n    const { top, left } = parent.style;\n    const { id, color } = parent.dataset;\n    const { value } = e.target;\n\n    updateSticky({\n      id: parseInt(id),\n      top,\n      left,\n      color,\n      message: value,\n    });\n  });\n\n  newSticky.appendChild(handle);\n  newSticky.appendChild(textarea);\n  newSticky.draggable;\n  //newSticky.addEventListener(\"dragstart\", stickyDragStart);\n  //newSticky.addEventListener(\"dragend\", stickyDragEnd);\n  newSticky.addEventListener(\"touchstart\", stickyTouchStart);\n  newSticky.addEventListener(\"mousedown\", stickyMouseDown);\n\n  return newSticky;\n}\n\nfunction stickyTouchStart(e) {\n  if (e.target.tagName !== \"TEXTAREA\") {\n    const current = e.currentTarget;\n    STATE.dragging = current;\n    const { top, left } = STATE.getOffset(current);\n    console.log(e.targetTouches[0]);\n    const xOffset = left - e.targetTouches[0].pageX;\n    const yOffset = top - e.targetTouches[0].pageY;\n\n    const trashRect = trashPath.getBoundingClientRect();\n    trashRect.x = Math.floor(trashRect.x);\n    trashRect.y = Math.floor(trashRect.y);\n    var pageX, pageY;\n\n    function touchMove(e) {\n      pageX = e.targetTouches[0].pageX;\n      pageY = e.targetTouches[0].pageY;\n      const { x, y, width, height } = trashRect;\n\n      if (pageX > x && pageX < x + width && pageY > y && pageY < y + height) {\n        trashPath.style.fill = \"#F33\";\n      } else {\n        trashPath.style.fill = \"\";\n      }\n\n      current.style.top = yOffset + pageY + \"px\";\n      current.style.left = xOffset + pageX + \"px\";\n    }\n\n    function touchEnd(e) {\n      console.log(e);\n      const { x, y, width, height } = trashRect;\n\n      const message = current.querySelector(\"textarea\").value;\n      const { top, left } = current.style;\n      const { id, color } = current.dataset;\n\n      if (pageX > x && pageX < x + width && pageY > y && pageY < y + height) {\n        trashPath.style.fill = \"#F33\";\n        trashUp();\n        return;\n      }\n\n      STATE.dragging = null;\n\n      updateSticky({\n        id: parseInt(id),\n        top,\n        left,\n        message,\n        color,\n      });\n\n      current.removeEventListener(\"touchmove\", touchMove);\n      current.removeEventListener(\"touchend\", touchEnd);\n      current.addEventListener(\"touchstart\", stickyTouchStart);\n    }\n\n    current.addEventListener(\"touchmove\", touchMove);\n    current.addEventListener(\"touchend\", touchEnd);\n    current.removeEventListener(\"touchstart\", stickyTouchStart);\n  }\n}\n\nfunction stickyMouseDown(e) {\n  e.currentTarget.style.zIndex = STATE.zIndex();\n  const { height, width } = App.getBoundingClientRect();\n  if (e.target.tagName !== \"TEXTAREA\") {\n    const current = e.currentTarget;\n    STATE.dragging = current;\n    const { top, left } = STATE.getOffset(current);\n    const xOffset = left - e.pageX;\n    const yOffset = top - e.pageY;\n\n    function mouseMove(e) {\n      console.log(e);\n      App.style.height = height + \"px\";\n      App.style.width = height + \"px\";\n      current.style.top = yOffset + e.pageY + \"px\";\n      current.style.left = xOffset + e.pageX + \"px\";\n    }\n\n    function mouseUp(e) {\n      App.style.height = \"\";\n      App.style.width = \"\";\n      STATE.dragging = null;\n      const message = e.currentTarget.querySelector(\"textarea\").value;\n      const { top, left } = e.currentTarget.style;\n      const { id, color } = e.currentTarget.dataset;\n\n      updateSticky({\n        id: parseInt(id),\n        top,\n        left,\n        message,\n        color,\n      });\n\n      current.removeEventListener(\"mousemove\", mouseMove);\n      current.removeEventListener(\"mouseup\", mouseUp);\n    }\n\n    current.addEventListener(\"mousemove\", mouseMove);\n    current.addEventListener(\"mouseup\", mouseUp);\n  }\n}\n\n// Color Select Events --- START\ncolorSelect.addEventListener(\"mouseup\", colorSelectClick);\ncolorSelect.addEventListener(\"mousedown\", colorSelectMouseDown);\n//colorSelect.addEventListener(\"dragstart\", colorSelectDragStart);\n//colorSelect.addEventListener(\"dragend\", colorSelectDragEnd);\n\n// touch events\ncolorSelect.addEventListener(\"touchstart\", colorSelectTouchStart);\ncolorSelect.addEventListener(\"touchend\", colorSelectTouchEnd);\n\nvar timeout;\n\nfunction colorSelectMouseDown(e) {\n  console.log(\"d\");\n  timeout = setTimeout(() => {\n    const newSticky = createSticky(0, e.pageY, e.pageX);\n    stickyContainer.appendChild(newSticky);\n    STATE.dragging = newSticky;\n\n    function mouseMove(e) {\n      newSticky.style.top = e.pageY + \"px\";\n      newSticky.style.left = e.pageX + \"px\";\n    }\n\n    function mouseUp(e) {\n      STATE.dragging = null;\n      addSticky(\n        {\n          top: e.pageY,\n          left: e.pageX,\n          color: STATE.selectedColor(),\n        },\n        newSticky\n      );\n\n      document.removeEventListener(\"mousemove\", mouseMove);\n      document.removeEventListener(\"mouseup\", mouseUp);\n    }\n\n    document.addEventListener(\"mousemove\", mouseMove);\n    document.addEventListener(\"mouseup\", mouseUp);\n  }, 200);\n}\n\nfunction colorSelectTouchStart(e) {\n  colorSelect.removeEventListener(\"mouseup\", colorSelectClick);\n  colorSelect.removeEventListener(\"mousedown\", colorSelectMouseDown);\n\n  timeout = setTimeout(() => {\n    const newSticky = createSticky(\n      0,\n      e.targetTouches[0].pageY,\n      e.targetTouches[0].pageX\n    );\n    stickyContainer.appendChild(newSticky);\n\n    function touchMove(e) {\n      newSticky.style.top = e.targetTouches[0].pageY + \"px\";\n      newSticky.style.left = e.targetTouches[0].pageX + \"px\";\n      colorSelect.removeEventListener(\"touchend\", colorSelectTouchEnd);\n    }\n\n    function touchEnd(e) {\n      timeout = null;\n      addSticky(\n        {\n          top: newSticky.style.top,\n          left: newSticky.style.left,\n          color: STATE.selectedColor(),\n        },\n        newSticky\n      );\n      document.removeEventListener(\"touchmove\", touchMove);\n      document.removeEventListener(\"touchend\", touchEnd);\n      colorSelect.removeEventListener(\"touchend\", colorSelectTouchEnd);\n      colorSelect.addEventListener(\"touchend\", colorSelectTouchEnd);\n    }\n\n    document.addEventListener(\"touchmove\", touchMove);\n    document.addEventListener(\"touchend\", touchEnd);\n  }, 200);\n}\n\nfunction colorSelectTouchEnd(e) {\n  if (timeout) {\n    clearTimeout(timeout);\n  }\n  const targetValue = e.target.dataset.color;\n  e.currentTarget.setAttribute(\"data-color\", targetValue);\n\n  colorOptions.classList.toggle(\"hidden\");\n}\n\nfunction colorSelectClick(e) {\n  if (timeout) {\n    clearTimeout(timeout);\n  }\n  const targetValue = e.target.dataset.color;\n\n  e.currentTarget.setAttribute(\"data-color\", targetValue);\n  colorOptions.classList.toggle(\"hidden\");\n}\n\n// Color Select Events --- END\n\nfunction stickyTouchEnd(e) {\n  if (e.target.tagName !== \"TEXTAREA\") {\n    const parent = e.currentTarget;\n    console.log(parent);\n    const message = parent.querySelector(\"textarea\").value;\n    const { top, left } = parent.style;\n    const { id, color } = parent.dataset;\n\n    updateSticky({\n      id: parseInt(id),\n      top,\n      left,\n      message,\n      color,\n    });\n  }\n}\n\nfunction trashLeave(e) {\n  trashPath.style.fill = \"\";\n}\n\nfunction trashUp() {\n  if (STATE.dragging) {\n    let confirm = window.confirm(\"Are you sure you want to delete this?\");\n    if (confirm) {\n      deleteSticky(STATE.dragging.dataset.id);\n\n      STATE.dragging.remove();\n      STATE.dragging = null;\n      trashPath.style.fill = \"\";\n    }\n  }\n}\n\nfunction trashEnter(e) {\n  if (STATE.dragging) {\n    trashPath.style.fill = \"#F33\";\n  }\n}\n\ntrash.addEventListener(\"mouseenter\", trashEnter);\ntrash.addEventListener(\"mouseleave\", trashLeave);\ntrash.addEventListener(\"mouseup\", trashUp);\n\ntrash.addEventListener(\"touchstart\", (e) => {\n  trashPath.style.fill = \"#F33\";\n});\n\ntrash.addEventListener(\"touchend\", (e) => {\n  trashPath.style.fill = \"\";\n});\n\n// fetch Stickies on first render\ngetStickies();\n"],"names":["$4b9b1fa295c3f78413bbf588dabeb6d3$export$default","async","Promise","resolve","reject","db","request","indexedDB","open","onerror","evt","console","error","onsuccess","log","target","result","errorCode","store","transaction","oncomplete","$4b9b1fa295c3f78413bbf588dabeb6d3$var$getTransaction","objectStore","err","onupgradeneeded","stickiesStore","createObjectStore","autoIncrement","keyPath","createIndex","unique","$579db261152ee8e72dc20ee685cc5d4e$var$App","document","getElementById","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelect","$579db261152ee8e72dc20ee685cc5d4e$var$colorOptions","$579db261152ee8e72dc20ee685cc5d4e$var$stickyContainer","$579db261152ee8e72dc20ee685cc5d4e$var$trash","$579db261152ee8e72dc20ee685cc5d4e$var$trashPath","querySelector","$579db261152ee8e72dc20ee685cc5d4e$var$addSticky","color","top","left","elm","then","res","add","message","dataset","id","catch","$579db261152ee8e72dc20ee685cc5d4e$var$updateSticky","put","body","removeChild","$579db261152ee8e72dc20ee685cc5d4e$var$inf","index","$579db261152ee8e72dc20ee685cc5d4e$var$gen","addEventListener","stickies","querySelectorAll","s","style","zIndex","$579db261152ee8e72dc20ee685cc5d4e$var$STATE","selectedColor","getAttribute","showingOptions","classList","contains","next","value","getOffset","parseInt","slice","dragging","$579db261152ee8e72dc20ee685cc5d4e$var$createElm","obj","tag","createElement","k","Object","keys","$579db261152ee8e72dc20ee685cc5d4e$var$createSticky","pageY","pageX","newSticky","handle","textarea","onkeydown","func","time","timeout","args","clearTimeout","setTimeout","$579db261152ee8e72dc20ee685cc5d4e$var$debounce","e","parent","parentElement","appendChild","draggable","$579db261152ee8e72dc20ee685cc5d4e$var$stickyTouchStart","$579db261152ee8e72dc20ee685cc5d4e$var$stickyMouseDown","tagName","current","currentTarget","targetTouches","xOffset","yOffset","trashRect","getBoundingClientRect","touchMove","x","y","width","height","fill","Math","floor","touchEnd","$579db261152ee8e72dc20ee685cc5d4e$var$trashUp","removeEventListener","mouseMove","mouseUp","$579db261152ee8e72dc20ee685cc5d4e$var$timeout","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelectMouseDown","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelectTouchEnd","targetValue","setAttribute","toggle","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelectClick","window","confirm","delete","remove","getAll"],"version":3,"file":"index.3b604595.js.map"}
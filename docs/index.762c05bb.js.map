{"mappings":"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","sources":["./src/js/script.js"],"sourcesContent":["import \"../styles/style.scss\";\n\nconst colorSelect = document.getElementById(\"color-select\");\nconst colorOptions = document.getElementById(\"color-options\");\nconst stickyContainer = document.getElementById(\"sticky-container\");\nconst trash = document.getElementById(\"trash\");\nconst trashPath = document.getElementById(\"trash-path\");\nconst hidden = document.getElementById(\"hidden\");\n\nconst removeChildren = (query) => {\n  const remove = [...document.querySelectorAll(query)];\n  for (let elm of remove) {\n    document.body.removeChild(elm);\n  }\n};\n\nconst removeChild = document.body.removeChild;\n\nfunction* inf() {\n  let index = 0;\n  while (true) {\n    yield index++;\n  }\n}\n\nvar gen = inf();\n\ndocument.getElementById(\"reset\").addEventListener(\"click\", () => {\n  const stickies = [...document.querySelectorAll(\".sticky\")];\n  for (let s of stickies) {\n    s.style.zIndex = 0;\n  }\n  gen = inf();\n});\n\nconst STATE = {\n  selectedColor: () => colorSelect.getAttribute(\"data-color\"),\n  showingOptions: () => !colorOptions.classList.contains(\"hidden\"),\n  zIndex: () => gen.next().value,\n  getOffset: (target) => {\n    var { top, left } = target.style;\n    top = parseInt(top.slice(0, -2));\n    left = parseInt(left.slice(0, -2));\n    return { top, left };\n  },\n  dragging: null,\n};\n\nconst createElm = (obj) => {\n  const { tag, classList, id, value, style, dataset } = obj;\n  const elm = document.createElement(tag);\n  elm.classList = classList;\n  if (id) {\n    elm.id = id;\n  }\n  if (value) {\n    elm.setAttribute(\"value\", value);\n  }\n  if (style) {\n    for (let k of Object.keys(style)) {\n      elm.style[k] = style[k];\n    }\n  }\n  if (dataset) {\n    for (let k of Object.keys(dataset)) {\n      elm.dataset[k] = dataset[k];\n    }\n  }\n  return elm;\n};\n\nfunction createSticky(pageY, pageX) {\n  const newSticky = createElm({\n    tag: \"div\",\n    classList: \"sticky\",\n    style: {\n      top: pageY + \"px\",\n      left: pageX + \"px\",\n      zIndex: STATE.zIndex(),\n    },\n    dataset: {\n      color: STATE.selectedColor(),\n    },\n  });\n  const handle = createElm({\n    tag: \"div\",\n  });\n  const textarea = createElm({\n    tag: \"textarea\",\n  });\n\n  newSticky.appendChild(handle);\n  newSticky.appendChild(textarea);\n  newSticky.draggable;\n  //newSticky.addEventListener(\"dragstart\", stickyDragStart);\n  //newSticky.addEventListener(\"dragend\", stickyDragEnd);\n  newSticky.addEventListener(\"touchmove\", stickyTouchMove);\n  newSticky.addEventListener(\"mousedown\", stickyMouseDown);\n\n  return newSticky;\n}\n\nfunction stickyMouseDown(e) {\n  e.currentTarget.style.zIndex = STATE.zIndex();\n  if (e.target.tagName !== \"TEXTAREA\") {\n    const current = e.currentTarget;\n    STATE.dragging = current;\n    const { top, left } = STATE.getOffset(current);\n    const xOffset = left - e.pageX;\n    const yOffset = top - e.pageY;\n\n    function mouseMove(e) {\n      current.style.top = yOffset + e.pageY + \"px\";\n      current.style.left = xOffset + e.pageX + \"px\";\n    }\n\n    function mouseUp(e) {\n      STATE.dragging = null;\n      document.removeEventListener(\"mousemove\", mouseMove);\n      document.removeEventListener(\"mouseup\", mouseUp);\n    }\n\n    document.addEventListener(\"mousemove\", mouseMove);\n    document.addEventListener(\"mouseup\", mouseUp);\n  }\n}\n\n// Color Select Events --- START\ncolorSelect.addEventListener(\"mouseup\", colorSelectClick);\ncolorSelect.addEventListener(\"mousedown\", colorSelectMouseDown);\n//colorSelect.addEventListener(\"dragstart\", colorSelectDragStart);\n//colorSelect.addEventListener(\"dragend\", colorSelectDragEnd);\n\n// touch events\ncolorSelect.addEventListener(\"touchstart\", colorSelectTouchStart);\ncolorSelect.addEventListener(\"touchend\", colorSelectTouchEnd);\n\nvar timeout;\n\nfunction colorSelectMouseDown(e) {\n  timeout = setTimeout(() => {\n    const newSticky = createSticky(e.pageY, e.pageX);\n    stickyContainer.appendChild(newSticky);\n    STATE.dragging = newSticky;\n\n    function mouseMove(e) {\n      newSticky.style.top = e.pageY + \"px\";\n      newSticky.style.left = e.pageX + \"px\";\n    }\n\n    function mouseUp(e) {\n      STATE.dragging = null;\n      document.removeEventListener(\"mousemove\", mouseMove);\n      document.removeEventListener(\"mouseup\", mouseUp);\n    }\n\n    document.addEventListener(\"mousemove\", mouseMove);\n    document.addEventListener(\"mouseup\", mouseUp);\n  }, 200);\n}\n\nvar evtFunc;\n\nfunction colorSelectTouchStart(e) {\n  const newSticky = createSticky(0, 0);\n  console.log(newSticky);\n  evtFunc = (e) => colorSelectTouchMove(e, newSticky);\n  colorSelect.addEventListener(\"touchmove\", evtFunc);\n  stickyContainer.appendChild(newSticky);\n}\n\nfunction colorSelectTouchMove(e, sticky) {\n  sticky.style.top = e.targetTouches[0].pageY + \"px\";\n  sticky.style.left = e.targetTouches[0].pageX + \"px\";\n}\n\nfunction colorSelectTouchEnd(e) {\n  console.log(e);\n  colorSelect.removeEventListener(\"touchmove\", evtFunc);\n}\n\nfunction colorSelectClick(e) {\n  console.log(\"c\");\n  if (timeout) {\n    clearTimeout(timeout);\n  }\n  const targetValue = e.target.dataset.color;\n\n  e.currentTarget.setAttribute(\"data-color\", targetValue);\n  colorOptions.classList.toggle(\"hidden\");\n}\n\nfunction colorSelectDragStart(e) {\n  const newSticky = createElm({\n    tag: \"div\",\n    classList: \"sticky remove\",\n    dataset: {\n      color: STATE.selectedColor(),\n    },\n  });\n  document.body.appendChild(newSticky);\n  e.dataTransfer.setDragImage(newSticky, 0, 0);\n}\n\nfunction colorSelectDragEnd(e) {\n  const newSticky = createSticky(e.pageY, e.pageX);\n  removeChildren(\".sticky.remove\");\n\n  stickyContainer.appendChild(newSticky);\n}\n\n// Color Select Events --- END\n\nfunction stickyTouchMove(e) {\n  STATE.dragged = e.currentTarget;\n  e.currentTarget.style.top = e.targetTouches[0].pageY + \"px\";\n  e.currentTarget.style.left = e.targetTouches[0].pageX + \"px\";\n\n  touchTarget = e;\n}\n\nfunction trashDrop(e) {\n  console.log(e);\n  trashLeave(e);\n}\n\nfunction trashEnter(e) {\n  if (STATE.dragging) {\n    trashPath.style.fill = \"#F33\";\n  }\n}\n\nfunction trashLeave(e) {\n  trashPath.style.fill = \"\";\n}\n\nfunction trashUp(e) {\n  if (STATE.dragging) {\n    let confirm = window.confirm(\"Are you sure you want to delete this?\");\n    console.log(confirm);\n    if (confirm) {\n      console.log(STATE.dragging);\n      STATE.dragging.remove();\n      STATE.dragging = null;\n      trashPath.style.fill = \"\";\n    }\n  }\n}\n\ntrash.addEventListener(\"mouseenter\", trashEnter);\ntrash.addEventListener(\"mouseleave\", trashLeave);\ntrash.addEventListener(\"mouseup\", trashUp);\n\ntrash.addEventListener(\"touchstart\", (e) => {\n  trashPath.style.fill = \"#F33\";\n});\n\ntrash.addEventListener(\"touchend\", (e) => {\n  trashPath.style.fill = \"\";\n});\n\nconst x = document.querySelector(\"body\");\n"],"names":["$579db261152ee8e72dc20ee685cc5d4e$var$colorSelect","document","getElementById","$579db261152ee8e72dc20ee685cc5d4e$var$colorOptions","$579db261152ee8e72dc20ee685cc5d4e$var$stickyContainer","$579db261152ee8e72dc20ee685cc5d4e$var$trash","$579db261152ee8e72dc20ee685cc5d4e$var$trashPath","body","removeChild","$579db261152ee8e72dc20ee685cc5d4e$var$inf","index","$579db261152ee8e72dc20ee685cc5d4e$var$gen","addEventListener","stickies","querySelectorAll","s","style","zIndex","$579db261152ee8e72dc20ee685cc5d4e$var$STATE","selectedColor","getAttribute","showingOptions","classList","contains","next","value","getOffset","target","top","left","parseInt","slice","dragging","$579db261152ee8e72dc20ee685cc5d4e$var$createElm","obj","tag","id","dataset","elm","createElement","setAttribute","k","Object","keys","$579db261152ee8e72dc20ee685cc5d4e$var$createSticky","pageY","pageX","newSticky","color","handle","textarea","appendChild","draggable","$579db261152ee8e72dc20ee685cc5d4e$var$stickyTouchMove","$579db261152ee8e72dc20ee685cc5d4e$var$stickyMouseDown","e","currentTarget","tagName","current","xOffset","yOffset","mouseMove","mouseUp","removeEventListener","$579db261152ee8e72dc20ee685cc5d4e$var$timeout","$579db261152ee8e72dc20ee685cc5d4e$var$evtFunc","dragged","targetTouches","touchTarget","$579db261152ee8e72dc20ee685cc5d4e$var$trashLeave","fill","console","log","clearTimeout","targetValue","toggle","setTimeout","sticky","$579db261152ee8e72dc20ee685cc5d4e$var$colorSelectTouchMove","confirm","window","remove","querySelector"],"version":3,"file":"index.762c05bb.js.map"}